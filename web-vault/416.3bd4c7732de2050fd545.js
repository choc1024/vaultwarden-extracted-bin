"use strict";(self.webpackChunk_bitwarden_web_vault=self.webpackChunk_bitwarden_web_vault||[]).push([[416],{12416:function(e,t,n){n.r(t),n.d(t,{MembersModule:function(){return so}});var i=n(2886),o=n(82245),s=n(71146),r=n(64984),a=n(28783),u=n(65071),c=n(54019),l=n(99042),d=n(84598),p=n(30359),g=n(92716),h=n(33031),U=n(92786),m=n(68362),f=n(58691),_=n(92614),Z=n(20698),b=n(51303),v=n(59281),A=n(88409),x=n(63078),w=n(14309);function y(e){return""!==e.value&&e.value&&void 0!==e.value.split(",").map((e=>u.kI.email({value:e.trim()}))).find((e=>null!==e))?{multipleEmails:{message:"multipleInputEmails"}}:null}function T(e,t,n){return i=>{if(""===i.value||!i.value)return null;const o=Array.from(new Set(i.value.split(",").filter((e=>e&&""!==e.trim()&&!t.some((t=>t===e.trim()))))));return!(e.planProductType!==b.kv.Free&&e.planProductType!==b.kv.Families&&e.planProductType!==b.kv.TeamsStarter)&&t.length+o.length>e.seats?{seatLimitReached:{message:n}}:null}}var q=n(85762),S=n(78627),C=n(99721),k=n(47244),I=n(73369),P=n(65254),N=n(47724),M=n(28508),L=n(33245),O=n(98205),Q=n(46246),J=n(36338),Y=n(66385),z=n(81974),R=n(7172),G=n(29465),E=n(24637),B=n(11512),j=n(75734),D=n(36179),$=n(44358),F=n(21656),K=n(12492),H=n(21500),W=n(66079),V=n(17731),X=n(26536),ee=n(28315),te=n(36689),ne=n(27646),ie=n(82933);function oe(e,t){if(1&e){const e=q.EpF();q.TgZ(0,"div"),q._uU(1,"\n        "),q.TgZ(2,"bit-form-control"),q._uU(3,"\n          "),q.TgZ(4,"input",5),q.NdJ("change",(function(){q.CHM(e);const t=q.oxw(2);return q.KtG(t.onChildCheck())})),q.qZA(),q._uU(5,"\n          "),q.TgZ(6,"bit-label"),q._uU(7),q.ALo(8,"i18n"),q.qZA(),q._uU(9,"\n        "),q.qZA(),q._uU(10,"\n      "),q.qZA()}if(2&e){const e=q.oxw().$implicit;q.xp6(4),q.Q6J("formControl",e.value),q.xp6(3),q.Oqu(q.lcZ(8,2,e.key))}}function se(e,t){if(1&e&&(q.ynx(0),q._uU(1,"\n      "),q.YNc(2,oe,11,4,"div",4),q._uU(3,"\n    "),q.BQk()),2&e){const e=t.$implicit,n=q.oxw();q.xp6(2),q.Q6J("ngIf",e.key!=n.parentId)}}class re{constructor(){this.destroy$=new c.x,this.onSavedUser=new q.vpe,this.onDeletedUser=new q.vpe}get parentIndeterminate(){return this.children.some((([e,t])=>1==t.value))&&!this.children.every((([e,t])=>1==t.value))}ngOnInit(){this.checkboxes.controls[this.parentId].valueChanges.pipe((0,m.R)(this.destroy$)).subscribe((e=>{Object.values(this.checkboxes.controls).forEach((t=>t.setValue(e,{emitEvent:!1})))}))}get parentCheckbox(){return this.checkboxes.controls[this.parentId]}get children(){return Object.entries(this.checkboxes.controls).filter((([e,t])=>e!=this.parentId))}onChildCheck(){const e=this.children.every((([e,t])=>1==t.value));this.parentCheckbox.setValue(e,{emitEvent:!1})}key(e,t){return t.key}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}pascalize(e){return ne.c.camelToPascalCase(e)}}re.ɵfac=function(e){return new(e||re)},re.ɵcmp=q.Xpm({type:re,selectors:[["app-nested-checkbox"]],inputs:{parentId:"parentId",checkboxes:"checkboxes"},outputs:{onSavedUser:"onSavedUser",onDeletedUser:"onDeletedUser"},decls:18,vars:10,consts:[[3,"formGroup"],["type","checkbox","bitCheckbox","",3,"formControlName","indeterminate"],[1,"tw-ml-4"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["type","checkbox","bitCheckbox","",3,"formControl","change"]],template:function(e,t){1&e&&(q.TgZ(0,"div",0),q._uU(1,"\n  "),q.TgZ(2,"bit-form-control"),q._uU(3,"\n    "),q._UZ(4,"input",1),q._uU(5,"\n    "),q.TgZ(6,"bit-label"),q._uU(7),q.ALo(8,"i18n"),q.qZA(),q._uU(9,"\n  "),q.qZA(),q._uU(10,"\n  "),q.TgZ(11,"div",2),q._uU(12,"\n    "),q.YNc(13,se,4,1,"ng-container",3),q.ALo(14,"keyvalue"),q._uU(15,"\n  "),q.qZA(),q._uU(16,"\n"),q.qZA(),q._uU(17,"\n")),2&e&&(q.Q6J("formGroup",t.checkboxes),q.xp6(4),q.Q6J("formControlName",t.parentId)("indeterminate",t.parentIndeterminate),q.xp6(3),q.Oqu(q.lcZ(8,6,t.parentId)),q.xp6(6),q.Q6J("ngForOf",q.lcZ(14,8,t.checkboxes.controls))("ngForTrackBy",t.key))},dependencies:[M.sg,M.O5,u.Wl,u.JJ,u.JL,u.oH,u.sg,u.u,R.b,j.A,D.u,M.Nd,ie.C],encapsulation:2});var ae,ue,ce=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{u(i.next(e))}catch(t){s(t)}}function a(e){try{u(i.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function le(e,t){if(1&e&&(q.TgZ(0,"span",14),q._uU(1),q.qZA()),2&e){const e=q.oxw();q.xp6(1),q.Oqu(e.params.name)}}function de(e,t){1&e&&(q.TgZ(0,"span",15),q._uU(1),q.ALo(2,"i18n"),q.qZA()),2&e&&(q.xp6(1),q.Oqu(q.lcZ(2,1,"revoked")))}function pe(e,t){1&e&&(q.ynx(0),q._uU(1,"\n        "),q._UZ(2,"i",16),q.ALo(3,"i18n"),q._uU(4,"\n        "),q.TgZ(5,"span",17),q._uU(6),q.ALo(7,"i18n"),q.qZA(),q._uU(8,"\n      "),q.BQk()),2&e&&(q.xp6(2),q.s9C("title",q.lcZ(3,2,"loading")),q.xp6(4),q.Oqu(q.lcZ(7,4,"loading")))}function ge(e,t){if(1&e&&(q.ynx(0),q._uU(1,"\n            "),q.TgZ(2,"p",34),q._uU(3),q.ALo(4,"i18n"),q.qZA(),q._uU(5,"\n            "),q.TgZ(6,"bit-form-field"),q._uU(7,"\n              "),q.TgZ(8,"bit-label"),q._uU(9),q.ALo(10,"i18n"),q.qZA(),q._uU(11,"\n              "),q._UZ(12,"input",35),q._uU(13,"\n              "),q.TgZ(14,"bit-hint"),q._uU(15),q.ALo(16,"i18n"),q.qZA(),q._uU(17,"\n            "),q.qZA(),q._uU(18,"\n          "),q.BQk()),2&e){const e=q.oxw().ngIf,t=q.oxw();q.xp6(3),q.Oqu(q.lcZ(4,3,"inviteUserDesc")),q.xp6(6),q.Oqu(q.lcZ(10,5,"email")),q.xp6(6),q.Oqu(q.xi3(16,7,"inviteMultipleEmailDesc",e.planProductType===t.ProductType.TeamsStarter?"10":"20"))}}function he(e,t){if(1&e&&(q.TgZ(0,"bit-radio-button",36),q._uU(1,"\n              "),q.TgZ(2,"bit-label"),q._uU(3),q.ALo(4,"i18n"),q.qZA(),q._uU(5,"\n              "),q.TgZ(6,"bit-hint"),q._uU(7),q.ALo(8,"i18n"),q.qZA(),q._uU(9,"\n            "),q.qZA()),2&e){const e=q.oxw(2);q.Q6J("value",e.organizationUserType.Manager),q.xp6(3),q.Oqu(q.lcZ(4,3,"manager")),q.xp6(4),q.Oqu(q.lcZ(8,5,"managerDesc"))}}function Ue(e,t){1&e&&(q.ynx(0),q._uU(1,"\n                  "),q.TgZ(2,"p"),q._uU(3),q.ALo(4,"i18n"),q.TgZ(5,"a",37),q._uU(6),q.ALo(7,"i18n"),q.qZA(),q._uU(8),q.ALo(9,"i18n"),q.qZA(),q._uU(10,"\n                "),q.BQk()),2&e&&(q.xp6(3),q.hij("\n                    ",q.lcZ(4,3,"customDescNonEnterpriseStart"),""),q.xp6(3),q.Oqu(q.lcZ(7,5,"customDescNonEnterpriseLink")),q.xp6(2),q.hij("",q.lcZ(9,7,"customDescNonEnterpriseEnd"),"\n                  "))}function me(e,t){1&e&&(q._uU(0,"\n                  "),q.TgZ(1,"p"),q._uU(2),q.ALo(3,"i18n"),q.qZA(),q._uU(4,"\n                ")),2&e&&(q.xp6(2),q.Oqu(q.lcZ(3,1,"customDesc")))}function fe(e,t){if(1&e){const e=q.EpF();q.ynx(0),q._uU(1,"\n              "),q.TgZ(2,"h3",39),q._uU(3),q.ALo(4,"i18n"),q.qZA(),q._uU(5,"\n              "),q.TgZ(6,"div",40),q._uU(7,"\n                "),q.TgZ(8,"div",41),q._uU(9,"\n                  "),q.TgZ(10,"div",42),q._uU(11,"\n                    "),q.TgZ(12,"bit-label",43),q._uU(13),q.ALo(14,"i18n"),q.qZA(),q._uU(15,"\n                    "),q._UZ(16,"hr",44),q._uU(17,"\n                    "),q.TgZ(18,"app-nested-checkbox",45),q._uU(19,"\n                    "),q.qZA(),q._uU(20,"\n                  "),q.qZA(),q._uU(21,"\n                "),q.qZA(),q._uU(22,"\n                "),q.TgZ(23,"div",41),q._uU(24,"\n                  "),q.TgZ(25,"div",42),q._uU(26,"\n                    "),q.TgZ(27,"bit-label",43),q._uU(28),q.ALo(29,"i18n"),q.qZA(),q._uU(30,"\n                    "),q._UZ(31,"hr",44),q._uU(32,"\n                    "),q.TgZ(33,"bit-form-control"),q._uU(34,"\n                      "),q._UZ(35,"input",46),q._uU(36,"\n                      "),q.TgZ(37,"bit-label"),q._uU(38),q.ALo(39,"i18n"),q.qZA(),q._uU(40,"\n                    "),q.qZA(),q._uU(41,"\n                    "),q.TgZ(42,"bit-form-control"),q._uU(43,"\n                      "),q._UZ(44,"input",47),q._uU(45,"\n                      "),q.TgZ(46,"bit-label"),q._uU(47),q.ALo(48,"i18n"),q.qZA(),q._uU(49,"\n                    "),q.qZA(),q._uU(50,"\n                    "),q.TgZ(51,"bit-form-control"),q._uU(52,"\n                      "),q._UZ(53,"input",48),q._uU(54,"\n                      "),q.TgZ(55,"bit-label"),q._uU(56),q.ALo(57,"i18n"),q.qZA(),q._uU(58,"\n                    "),q.qZA(),q._uU(59,"\n                    "),q.TgZ(60,"app-nested-checkbox",49),q._uU(61,"\n                    "),q.qZA(),q._uU(62,"\n                    "),q.TgZ(63,"bit-form-control"),q._uU(64,"\n                      "),q._UZ(65,"input",50),q._uU(66,"\n                      "),q.TgZ(67,"bit-label"),q._uU(68),q.ALo(69,"i18n"),q.qZA(),q._uU(70,"\n                    "),q.qZA(),q._uU(71,"\n                    "),q.TgZ(72,"bit-form-control"),q._uU(73,"\n                      "),q._UZ(74,"input",51),q._uU(75,"\n                      "),q.TgZ(76,"bit-label"),q._uU(77),q.ALo(78,"i18n"),q.qZA(),q._uU(79,"\n                    "),q.qZA(),q._uU(80,"\n                    "),q.TgZ(81,"bit-form-control"),q._uU(82,"\n                      "),q._UZ(83,"input",52),q._uU(84,"\n                      "),q.TgZ(85,"bit-label"),q._uU(86),q.ALo(87,"i18n"),q.qZA(),q._uU(88,"\n                    "),q.qZA(),q._uU(89,"\n                    "),q.TgZ(90,"bit-form-control"),q._uU(91,"\n                      "),q.TgZ(92,"input",53),q.NdJ("change",(function(){q.CHM(e);const t=q.oxw(3);return q.KtG(t.handleDependentPermissions())})),q.qZA(),q._uU(93,"\n                      "),q.TgZ(94,"bit-label"),q._uU(95),q.ALo(96,"i18n"),q.qZA(),q._uU(97,"\n                    "),q.qZA(),q._uU(98,"\n                    "),q.TgZ(99,"bit-form-control"),q._uU(100,"\n                      "),q.TgZ(101,"input",54),q.NdJ("change",(function(){q.CHM(e);const t=q.oxw(3);return q.KtG(t.handleDependentPermissions())})),q.qZA(),q._uU(102,"\n                      "),q.TgZ(103,"bit-label"),q._uU(104),q.ALo(105,"i18n"),q.qZA(),q._uU(106,"\n                    "),q.qZA(),q._uU(107,"\n                  "),q.qZA(),q._uU(108,"\n                "),q.qZA(),q._uU(109,"\n              "),q.qZA(),q._uU(110,"\n            "),q.BQk()}if(2&e){const e=q.oxw(3);q.xp6(3),q.hij("\n                ",q.lcZ(4,14,"permissions"),"\n              "),q.xp6(3),q.Q6J("formGroup",e.permissionsGroup),q.xp6(7),q.Oqu(q.lcZ(14,16,"managerPermissions")),q.xp6(5),q.Q6J("checkboxes",e.permissionsGroup.controls.manageAssignedCollectionsGroup),q.xp6(10),q.Oqu(q.lcZ(29,18,"adminPermissions")),q.xp6(10),q.Oqu(q.lcZ(39,20,"accessEventLogs")),q.xp6(9),q.Oqu(q.lcZ(48,22,"accessImportExport")),q.xp6(9),q.Oqu(q.lcZ(57,24,"accessReports")),q.xp6(4),q.Q6J("checkboxes",e.permissionsGroup.controls.manageAllCollectionsGroup),q.xp6(8),q.Oqu(q.lcZ(69,26,"manageGroups")),q.xp6(9),q.Oqu(q.lcZ(78,28,"manageSso")),q.xp6(9),q.Oqu(q.lcZ(87,30,"managePolicies")),q.xp6(9),q.Oqu(q.lcZ(96,32,"manageUsers")),q.xp6(9),q.Oqu(q.lcZ(105,34,"manageAccountRecovery"))}}function _e(e,t){if(1&e){const e=q.EpF();q._uU(0,"\n              "),q.TgZ(1,"div",40),q._uU(2,"\n                "),q.TgZ(3,"div",55),q._uU(4,"\n                  "),q.TgZ(5,"bit-form-control"),q._uU(6,"\n                    "),q._UZ(7,"input",46),q._uU(8,"\n                    "),q.TgZ(9,"bit-label"),q._uU(10),q.ALo(11,"i18n"),q.qZA(),q._uU(12,"\n                  "),q.qZA(),q._uU(13,"\n                  "),q.TgZ(14,"bit-form-control"),q._uU(15,"\n                    "),q._UZ(16,"input",47),q._uU(17,"\n                    "),q.TgZ(18,"bit-label"),q._uU(19),q.ALo(20,"i18n"),q.qZA(),q._uU(21,"\n                  "),q.qZA(),q._uU(22,"\n                  "),q.TgZ(23,"bit-form-control"),q._uU(24,"\n                    "),q._UZ(25,"input",48),q._uU(26,"\n                    "),q.TgZ(27,"bit-label"),q._uU(28),q.ALo(29,"i18n"),q.qZA(),q._uU(30,"\n                  "),q.qZA(),q._uU(31,"\n                "),q.qZA(),q._uU(32,"\n                "),q.TgZ(33,"div",55),q._uU(34,"\n                  "),q.TgZ(35,"app-nested-checkbox",49),q._uU(36,"\n                  "),q.qZA(),q._uU(37,"\n                "),q.qZA(),q._uU(38,"\n                "),q.TgZ(39,"div",55),q._uU(40,"\n                  "),q.TgZ(41,"div",42),q._uU(42,"\n                    "),q.TgZ(43,"bit-form-control"),q._uU(44,"\n                      "),q._UZ(45,"input",50),q._uU(46,"\n                      "),q.TgZ(47,"bit-label"),q._uU(48),q.ALo(49,"i18n"),q.qZA(),q._uU(50,"\n                    "),q.qZA(),q._uU(51,"\n                    "),q.TgZ(52,"bit-form-control"),q._uU(53,"\n                      "),q._UZ(54,"input",51),q._uU(55,"\n                      "),q.TgZ(56,"bit-label"),q._uU(57),q.ALo(58,"i18n"),q.qZA(),q._uU(59,"\n                    "),q.qZA(),q._uU(60,"\n                    "),q.TgZ(61,"bit-form-control"),q._uU(62,"\n                      "),q._UZ(63,"input",52),q._uU(64,"\n                      "),q.TgZ(65,"bit-label"),q._uU(66),q.ALo(67,"i18n"),q.qZA(),q._uU(68,"\n                    "),q.qZA(),q._uU(69,"\n                    "),q.TgZ(70,"bit-form-control"),q._uU(71,"\n                      "),q.TgZ(72,"input",53),q.NdJ("change",(function(){q.CHM(e);const t=q.oxw(3);return q.KtG(t.handleDependentPermissions())})),q.qZA(),q._uU(73,"\n                      "),q.TgZ(74,"bit-label"),q._uU(75),q.ALo(76,"i18n"),q.qZA(),q._uU(77,"\n                    "),q.qZA(),q._uU(78,"\n                    "),q.TgZ(79,"bit-form-control"),q._uU(80,"\n                      "),q.TgZ(81,"input",54),q.NdJ("change",(function(){q.CHM(e);const t=q.oxw(3);return q.KtG(t.handleDependentPermissions())})),q.qZA(),q._uU(82,"\n                      "),q.TgZ(83,"bit-label"),q._uU(84),q.ALo(85,"i18n"),q.qZA(),q._uU(86,"\n                    "),q.qZA(),q._uU(87,"\n                  "),q.qZA(),q._uU(88,"\n                "),q.qZA(),q._uU(89,"\n              "),q.qZA(),q._uU(90,"\n            ")}if(2&e){const e=q.oxw(3);q.xp6(1),q.Q6J("formGroup",e.permissionsGroup),q.xp6(9),q.Oqu(q.lcZ(11,10,"accessEventLogs")),q.xp6(9),q.Oqu(q.lcZ(20,12,"accessImportExport")),q.xp6(9),q.Oqu(q.lcZ(29,14,"accessReports")),q.xp6(7),q.Q6J("checkboxes",e.permissionsGroup.controls.manageAllCollectionsGroup),q.xp6(13),q.Oqu(q.lcZ(49,16,"manageGroups")),q.xp6(9),q.Oqu(q.lcZ(58,18,"manageSso")),q.xp6(9),q.Oqu(q.lcZ(67,20,"managePolicies")),q.xp6(9),q.Oqu(q.lcZ(76,22,"manageUsers")),q.xp6(9),q.Oqu(q.lcZ(85,24,"manageAccountRecovery"))}}function Ze(e,t){if(1&e&&(q.ynx(0),q._uU(1,"\n            "),q.YNc(2,fe,111,36,"ng-container",28),q._uU(3,"\n            "),q.YNc(4,_e,91,26,"ng-template",null,38,q.W1O),q._uU(6,"\n          "),q.BQk()),2&e){const e=q.MAs(5),t=q.oxw().ngIf;q.xp6(2),q.Q6J("ngIf",!t.flexibleCollections)("ngIfElse",e)}}function be(e,t){if(1&e&&(q.ynx(0),q._uU(1,"\n            "),q.TgZ(2,"h3",56),q._uU(3),q.ALo(4,"i18n"),q.TgZ(5,"a",57),q.ALo(6,"i18n"),q._uU(7,"\n                "),q._UZ(8,"i",22),q._uU(9,"\n              "),q.qZA(),q._uU(10,"\n            "),q.qZA(),q._uU(11,"\n            "),q.TgZ(12,"p",58),q._uU(13),q.ALo(14,"i18n"),q.qZA(),q._uU(15,"\n            "),q.TgZ(16,"bit-form-control"),q._uU(17,"\n              "),q._UZ(18,"input",59),q._uU(19,"\n              "),q.TgZ(20,"bit-label"),q._uU(21),q.ALo(22,"i18n"),q.qZA(),q._uU(23,"\n            "),q.qZA(),q._uU(24,"\n          "),q.BQk()),2&e){const e=q.oxw(2);q.xp6(3),q.hij("\n              ",q.lcZ(4,5,"secretsManager"),"\n              "),q.xp6(2),q.s9C("appA11yTitle",q.lcZ(6,7,"learnMore")),q.xp6(8),q.Oqu(q.lcZ(14,9,"secretsManagerAccessDescription")),q.xp6(5),q.Q6J("disabled",e.isOnSecretsManagerStandalone),q.xp6(3),q.hij("\n                ",q.lcZ(22,11,"userAccessSecretsManagerGA"),"\n              ")}}function ve(e,t){if(1&e&&(q.TgZ(0,"bit-tab",19),q.ALo(1,"i18n"),q._uU(2,"\n          "),q.TgZ(3,"div",60),q._uU(4),q.ALo(5,"async"),q.ALo(6,"i18n"),q.ALo(7,"i18n"),q.qZA(),q._uU(8,"\n          "),q._UZ(9,"bit-access-selector",61),q.ALo(10,"i18n"),q.ALo(11,"i18n"),q.ALo(12,"i18n"),q.ALo(13,"async"),q._uU(14,"\n        "),q.qZA()),2&e){const e=q.oxw().ngIf,t=q.oxw();q.Q6J("label",q.lcZ(1,8,"groups")),q.xp6(4),q.hij("\n            ",q.lcZ(5,10,t.restrictEditingSelf$)?q.lcZ(6,12,"restrictedGroupAccess"):q.lcZ(7,14,"groupAccessUserDesc"),"\n          "),q.xp6(5),q.Q6J("items",t.groupAccessItems)("columnHeader",q.lcZ(10,16,"groups"))("selectorLabelText",q.lcZ(11,18,"selectGroups"))("emptySelectionText",q.lcZ(12,20,"noGroupsAdded"))("flexibleCollectionsEnabled",e.flexibleCollections)("hideMultiSelect",q.lcZ(13,22,t.restrictEditingSelf$))}}function Ae(e,t){1&e&&(q.TgZ(0,"div",60),q._uU(1),q.ALo(2,"i18n"),q.qZA()),2&e&&(q.xp6(1),q.hij("\n            ",q.lcZ(2,1,"cannotAddYourselfToCollections"),"\n          "))}function xe(e,t){1&e&&(q.TgZ(0,"span"),q._uU(1),q.ALo(2,"i18n"),q.qZA()),2&e&&(q.xp6(1),q.hij("\n              ",q.lcZ(2,1,"userPermissionOverrideHelperDesc"),"\n            "))}function we(e,t){1&e&&(q.TgZ(0,"span"),q._uU(1),q.ALo(2,"i18n"),q.qZA()),2&e&&(q.xp6(1),q.hij("\n              ",q.lcZ(2,1,"restrictedCollectionAssignmentDesc"),"\n            "))}function ye(e,t){if(1&e&&(q.TgZ(0,"div",60),q._uU(1,"\n            "),q.YNc(2,xe,3,3,"span",6),q._uU(3,"\n            "),q.YNc(4,we,3,3,"span",6),q.ALo(5,"async"),q._uU(6,"\n          "),q.qZA()),2&e){const e=q.oxw().ngIf,t=q.oxw();q.xp6(2),q.Q6J("ngIf",e.useGroups),q.xp6(2),q.Q6J("ngIf",!q.lcZ(5,2,t.canAssignAccessToAnyCollection$))}}function Te(e,t){1&e&&(q.TgZ(0,"div",60),q._uU(1,"\n            "),q.TgZ(2,"bit-form-control"),q._uU(3,"\n              "),q._UZ(4,"input",62),q._uU(5,"\n              "),q.TgZ(6,"bit-label"),q._uU(7),q.ALo(8,"i18n"),q.TgZ(9,"a",63),q.ALo(10,"i18n"),q._uU(11,"\n                  "),q._UZ(12,"i",22),q._uU(13,"\n                "),q.qZA(),q._uU(14,"\n              "),q.qZA(),q._uU(15,"\n              "),q.TgZ(16,"bit-hint"),q._uU(17),q.ALo(18,"i18n"),q.qZA(),q._uU(19,"\n            "),q.qZA(),q._uU(20,"\n          "),q.qZA()),2&e&&(q.xp6(7),q.hij("\n                ",q.lcZ(8,3,"accessAllCollectionsDesc"),"\n                "),q.xp6(2),q.s9C("appA11yTitle",q.lcZ(10,5,"learnMore")),q.xp6(8),q.Oqu(q.lcZ(18,7,"accessAllCollectionsHelp")))}function qe(e,t){if(1&e&&(q._UZ(0,"bit-access-selector",64),q.ALo(1,"i18n"),q.ALo(2,"i18n"),q.ALo(3,"i18n"),q.ALo(4,"async")),2&e){const e=q.oxw().ngIf,t=q.oxw();q.Q6J("permissionMode",t.PermissionMode.Edit)("showGroupColumn",e.useGroups)("items",t.collectionAccessItems)("columnHeader",q.lcZ(1,8,"collection"))("selectorLabelText",q.lcZ(2,10,"selectCollections"))("emptySelectionText",q.lcZ(3,12,"noCollectionsAdded"))("flexibleCollectionsEnabled",e.flexibleCollections)("hideMultiSelect",q.lcZ(4,14,t.restrictEditingSelf$))}}function Se(e,t){if(1&e){const e=q.EpF();q.TgZ(0,"bit-tab-group",18),q.NdJ("selectedIndexChange",(function(t){q.CHM(e);const n=q.oxw();return q.KtG(n.tabIndex=t)})),q._uU(1,"\n        "),q.TgZ(2,"bit-tab",19),q.ALo(3,"i18n"),q._uU(4,"\n          "),q.YNc(5,ge,19,10,"ng-container",6),q._uU(6,"\n          "),q.TgZ(7,"bit-radio-group",20),q._uU(8,"\n            "),q.TgZ(9,"bit-label"),q._uU(10),q.ALo(11,"i18n"),q.TgZ(12,"a",21),q.ALo(13,"i18n"),q._uU(14,"\n                "),q._UZ(15,"i",22),q._uU(16,"\n              "),q.qZA(),q._uU(17,"\n            "),q.qZA(),q._uU(18,"\n            "),q.TgZ(19,"bit-radio-button",23),q._uU(20,"\n              "),q.TgZ(21,"bit-label"),q._uU(22),q.ALo(23,"i18n"),q.qZA(),q._uU(24,"\n              "),q.TgZ(25,"bit-hint"),q._uU(26),q.ALo(27,"i18n"),q.qZA(),q._uU(28,"\n            "),q.qZA(),q._uU(29,"\n            "),q.YNc(30,he,10,7,"bit-radio-button",24),q._uU(31,"\n            "),q.TgZ(32,"bit-radio-button",25),q._uU(33,"\n              "),q.TgZ(34,"bit-label"),q._uU(35),q.ALo(36,"i18n"),q.qZA(),q._uU(37,"\n              "),q.TgZ(38,"bit-hint"),q._uU(39),q.ALo(40,"i18n"),q.qZA(),q._uU(41,"\n            "),q.qZA(),q._uU(42,"\n            "),q.TgZ(43,"bit-radio-button",26),q._uU(44,"\n              "),q.TgZ(45,"bit-label"),q._uU(46),q.ALo(47,"i18n"),q.qZA(),q._uU(48,"\n              "),q.TgZ(49,"bit-hint"),q._uU(50),q.ALo(51,"i18n"),q.qZA(),q._uU(52,"\n            "),q.qZA(),q._uU(53,"\n            "),q.TgZ(54,"bit-radio-button",27),q._uU(55,"\n              "),q.TgZ(56,"bit-label"),q._uU(57),q.ALo(58,"i18n"),q.qZA(),q._uU(59,"\n              "),q.TgZ(60,"bit-hint"),q._uU(61,"\n                "),q.YNc(62,Ue,11,9,"ng-container",28),q._uU(63,"\n                "),q.YNc(64,me,5,3,"ng-template",null,29,q.W1O),q._uU(66,"\n              "),q.qZA(),q._uU(67,"\n            "),q.qZA(),q._uU(68,"\n          "),q.qZA(),q._uU(69,"\n          "),q.YNc(70,Ze,7,2,"ng-container",6),q._uU(71,"\n          "),q.YNc(72,be,25,13,"ng-container",6),q._uU(73,"\n          "),q.TgZ(74,"bit-form-field"),q._uU(75,"\n            "),q.TgZ(76,"bit-label"),q._uU(77),q.ALo(78,"i18n"),q.qZA(),q._uU(79,"\n            "),q._UZ(80,"input",30),q._uU(81,"\n            "),q.TgZ(82,"bit-hint"),q._uU(83),q.ALo(84,"i18n"),q.qZA(),q._uU(85,"\n          "),q.qZA(),q._uU(86,"\n        "),q.qZA(),q._uU(87,"\n        "),q.YNc(88,ve,15,24,"bit-tab",31),q._uU(89,"\n        "),q.TgZ(90,"bit-tab",19),q.ALo(91,"i18n"),q._uU(92,"\n          "),q.YNc(93,Ae,3,3,"div",32),q.ALo(94,"async"),q._uU(95,"\n          "),q.YNc(96,ye,7,4,"div",32),q.ALo(97,"async"),q.ALo(98,"async"),q._uU(99,"\n          "),q.YNc(100,Te,21,9,"div",32),q._uU(101,"\n          "),q.YNc(102,qe,5,16,"bit-access-selector",33),q.qZA(),q._uU(103,"\n      "),q.qZA()}if(2&e){const e=t.ngIf,n=q.MAs(65),i=q.oxw();q.Q6J("selectedIndex",i.tabIndex),q.xp6(2),q.Q6J("label",q.lcZ(3,30,"role")),q.xp6(3),q.Q6J("ngIf",!i.editMode),q.xp6(5),q.hij("\n              ",q.lcZ(11,32,"memberRole"),"\n              "),q.xp6(2),q.s9C("appA11yTitle",q.lcZ(13,34,"learnMore")),q.xp6(7),q.Q6J("value",i.organizationUserType.User),q.xp6(3),q.Oqu(q.lcZ(23,36,"user")),q.xp6(4),q.Oqu(q.lcZ(27,38,"userDesc")),q.xp6(4),q.Q6J("ngIf",!e.flexibleCollections),q.xp6(2),q.Q6J("value",i.organizationUserType.Admin),q.xp6(3),q.Oqu(q.lcZ(36,40,"admin")),q.xp6(4),q.Oqu(q.lcZ(40,42,"adminDesc")),q.xp6(4),q.Q6J("value",i.organizationUserType.Owner),q.xp6(3),q.Oqu(q.lcZ(47,44,"owner")),q.xp6(4),q.Oqu(q.lcZ(51,46,"ownerDesc")),q.xp6(4),q.Q6J("value",i.organizationUserType.Custom)("disabled",!e.useCustomPermissions||null),q.xp6(3),q.Oqu(q.lcZ(58,48,"custom")),q.xp6(5),q.Q6J("ngIf",!e.useCustomPermissions)("ngIfElse",n),q.xp6(8),q.Q6J("ngIf",i.customUserTypeSelected),q.xp6(2),q.Q6J("ngIf",e.useSecretsManager),q.xp6(5),q.Oqu(q.lcZ(78,50,"externalId")),q.xp6(6),q.Oqu(q.lcZ(84,52,"externalIdDesc")),q.xp6(5),q.Q6J("ngIf",e.useGroups),q.xp6(2),q.Q6J("label",q.lcZ(91,54,"collections")),q.xp6(3),q.Q6J("ngIf",q.lcZ(94,56,i.restrictEditingSelf$)),q.xp6(3),q.Q6J("ngIf",!q.lcZ(97,58,i.restrictEditingSelf$)&&(e.useGroups||!q.lcZ(98,60,i.canAssignAccessToAnyCollection$))),q.xp6(4),q.Q6J("ngIf",!e.flexibleCollections),q.xp6(2),q.Q6J("ngIf",!i.accessAllCollections)}}function Ce(e,t){if(1&e&&(q.TgZ(0,"button",65),q._uU(1),q.ALo(2,"i18n"),q.qZA()),2&e){const e=q.oxw();q.Q6J("bitAction",e.restore)("disabled",e.loading),q.xp6(1),q.hij("\n          ",q.lcZ(2,3,"restoreAccess"),"\n        ")}}function ke(e,t){if(1&e&&(q.TgZ(0,"button",65),q._uU(1),q.ALo(2,"i18n"),q.qZA()),2&e){const e=q.oxw();q.Q6J("bitAction",e.revoke)("disabled",e.loading),q.xp6(1),q.hij("\n          ",q.lcZ(2,3,"revokeAccess"),"\n        ")}}function Ie(e,t){if(1&e&&(q._UZ(0,"button",66),q.ALo(1,"i18n")),2&e){const e=q.oxw();q.Q6J("appA11yTitle",q.lcZ(1,3,"delete"))("bitAction",e.delete)("disabled",e.loading)}}!function(e){e[e.Role=0]="Role",e[e.Groups=1]="Groups",e[e.Collections=2]="Collections"}(ae||(ae={})),function(e){e.Saved="saved",e.Canceled="canceled",e.Deleted="deleted",e.Revoked="revoked",e.Restored="restored"}(ue||(ue={}));class Pe{get customUserTypeSelected(){return this.formGroup.value.type===_.je.Custom}get accessAllCollections(){return this.formGroup.value.accessAllCollections}constructor(e,t,n,i,o,s,r,a,u,f,A,y,T){var q;this.params=e,this.dialogRef=t,this.i18nService=n,this.platformUtilsService=i,this.formBuilder=o,this.collectionAdminService=s,this.groupService=r,this.userService=a,this.organizationUserService=u,this.dialogService=f,this.configService=A,this.accountService=y,this.loading=!0,this.editMode=!1,this.isRevoked=!1,this.access="selected",this.collections=[],this.organizationUserType=_.je,this.PermissionMode=w.R9,this.showNoMasterPasswordWarning=!1,this.collectionAccessItems=[],this.groupAccessItems=[],this.formGroup=this.formBuilder.group({emails:[""],type:_.je.User,externalId:this.formBuilder.control({value:"",disabled:!0}),accessAllCollections:!1,accessSecretsManager:!1,access:[[]],groups:[[]]}),this.permissionsGroup=this.formBuilder.group({manageAssignedCollectionsGroup:this.formBuilder.group({manageAssignedCollections:!1,editAssignedCollections:!1,deleteAssignedCollections:!1}),manageAllCollectionsGroup:this.formBuilder.group({manageAllCollections:!1,createNewCollections:!1,editAnyCollection:!1,deleteAnyCollection:!1}),accessEventLogs:!1,accessImportExport:!1,accessReports:!1,manageGroups:!1,manageSso:!1,managePolicies:!1,manageUsers:!1,manageResetPassword:!1}),this.destroy$=new c.x,this.submit=()=>ce(this,void 0,void 0,(function*(){var e;if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return void(this.tabIndex!==ae.Role&&this.platformUtilsService.showToast("error",null,this.i18nService.t("fieldOnTabRequiresAttention",this.i18nService.t("role"))));const t=yield(0,l.z)(this.organization$);if(!t.useCustomPermissions&&this.customUserTypeSelected)return void this.platformUtilsService.showToast("error",null,this.i18nService.t("customNonEnterpriseError"));const n=new x.Qg;if(n.id=this.params.organizationUserId,n.organizationId=this.params.organizationId,n.accessAll=this.accessAllCollections,n.type=this.formGroup.value.type,n.permissions=this.setRequestPermissions(null!==(e=n.permissions)&&void 0!==e?e:new Z.Q,n.type!==_.je.Custom),n.collections=this.formGroup.value.access.filter((e=>e.type===w.zD.Collection)).map(w.E2),n.groups=(yield(0,l.z)(this.restrictEditingSelf$))?null:this.formGroup.value.groups.map((e=>e.id)),n.accessSecretsManager=this.formGroup.value.accessSecretsManager,this.editMode)yield this.userService.save(n);else{n.id=this.params.organizationUserId;const e=t.planProductType===b.kv.TeamsStarter?10:20,i=[...new Set(this.formGroup.value.emails.trim().split(/\s*,\s*/))];if(i.length>e)return void this.formGroup.controls.emails.setErrors({tooManyEmails:{message:this.i18nService.t("tooManyEmails",e)}});if(t.hasReseller&&this.params.numConfirmedMembers+i.length>t.seats)return void this.formGroup.controls.emails.setErrors({tooManyEmails:{message:this.i18nService.t("seatLimitReachedContactYourProvider")}});yield this.userService.invite(i,n)}this.platformUtilsService.showToast("success",null,this.i18nService.t(this.editMode?"editedUserId":"invitedUsers",this.params.name)),this.close(ue.Saved)})),this.delete=()=>ce(this,void 0,void 0,(function*(){if(!this.editMode)return;const e=this.params.usesKeyConnector?"removeUserConfirmationKeyConnector":"removeOrgUserConfirmation";let t=yield this.dialogService.openSimpleDialog({title:{key:"removeUserIdAccess",placeholders:[this.params.name]},content:{key:e},type:"warning"});return!!t&&(!(this.showNoMasterPasswordWarning&&(t=yield this.noMasterPasswordConfirmationDialog(),!t))&&(yield this.organizationUserService.deleteOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.platformUtilsService.showToast("success",null,this.i18nService.t("removedUserId",this.params.name)),void this.close(ue.Deleted)))})),this.revoke=()=>ce(this,void 0,void 0,(function*(){if(!this.editMode)return;let e=yield this.dialogService.openSimpleDialog({title:{key:"revokeUserId",placeholders:[this.params.name]},content:{key:"revokeUserConfirmation"},acceptButtonText:{key:"revokeAccess"},type:"warning"});return!!e&&(!(this.showNoMasterPasswordWarning&&(e=yield this.noMasterPasswordConfirmationDialog(),!e))&&(yield this.organizationUserService.revokeOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.platformUtilsService.showToast("success",null,this.i18nService.t("revokedUserId",this.params.name)),this.isRevoked=!0,void this.close(ue.Revoked)))})),this.restore=()=>ce(this,void 0,void 0,(function*(){this.editMode&&(yield this.organizationUserService.restoreOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.platformUtilsService.showToast("success",null,this.i18nService.t("restoredUserId",this.params.name)),this.isRevoked=!1,this.close(ue.Restored))})),this.ProductType=b.kv,this.organization$=T.get$(this.params.organizationId).pipe((0,d.d)({refCount:!0,bufferSize:1})),this.editMode=null!=this.params.organizationUserId,this.tabIndex=null!==(q=this.params.initialTab)&&void 0!==q?q:ae.Role,this.title=this.i18nService.t(this.editMode?"editMember":"inviteMember"),this.isOnSecretsManagerStandalone=this.params.isOnSecretsManagerStandalone,this.isOnSecretsManagerStandalone&&this.formGroup.patchValue({accessSecretsManager:!0});const S=this.organization$.pipe((0,p.w)((e=>e.useGroups?this.groupService.getAll(this.params.organizationId):(0,g.of)([])))),C=this.params.organizationUserId?this.userService.get(this.params.organizationId,this.params.organizationUserId):(0,g.of)(null);this.allowAdminAccessToAllCollectionItems$=(0,h.a)([this.organization$,this.configService.getFeatureFlag$(v.T.FlexibleCollectionsV1)]).pipe((0,U.U)((([e,t])=>!t||!e.flexibleCollections||e.allowAdminAccessToAllCollectionItems))),this.restrictEditingSelf$=(0,h.a)([this.allowAdminAccessToAllCollectionItems$,C,this.accountService.activeAccount$]).pipe((0,U.U)((([e,t,n])=>!e&&null!=t&&t.userId==n.id)),(0,d.d)({refCount:!0,bufferSize:1})),this.restrictEditingSelf$.pipe((0,m.R)(this.destroy$)).subscribe((e=>{e?this.formGroup.controls.groups.disable():this.formGroup.controls.groups.enable()}));const k=this.configService.getFeatureFlag$(v.T.FlexibleCollectionsV1);this.canAssignAccessToAnyCollection$=(0,h.a)([this.organization$,k,this.allowAdminAccessToAllCollectionItems$]).pipe((0,U.U)((([e,t,n])=>e.canEditAnyCollection(t)||e.permissions.manageUsers&&n))),(0,h.a)({organization:this.organization$,collections:this.collectionAdminService.getAll(this.params.organizationId),userDetails:C,groups:S,flexibleCollectionsV1Enabled:k}).pipe((0,m.R)(this.destroy$)).subscribe((({organization:e,collections:t,userDetails:n,groups:i,flexibleCollectionsV1Enabled:o})=>{this.setFormValidators(e),this.groupAccessItems=[].concat(i.map((e=>{return t=e,{type:w.zD.Group,id:t.id,labelName:t.name,listName:t.name};var t}))),this.collectionAccessItems=t.map((t=>Ne(t,e,o,null==n?void 0:t.users.find((e=>e.id===n.id))))).filter((e=>!e.readonly||(null==n?void 0:n.collections.some((t=>t.id==e.id))))),null!=n&&this.loadOrganizationUser(n,i,t,e,o),this.loading=!1}))}setFormValidators(e){const t=[u.kI.required,y,T(e,this.params.allOrganizationUserEmails,this.i18nService.t("subscriptionUpgrade",e.seats))],n=this.formGroup.get("emails");n.setValidators(t),n.updateValueAndValidity()}loadOrganizationUser(e,t,n,i,o){if(!e)throw new Error("Could not find user to edit.");this.isRevoked=e.status===_.Dn.Revoked,this.showNoMasterPasswordWarning=e.status>_.Dn.Invited&&!1===e.hasMasterPassword;const s={editAssignedCollections:e.permissions.editAssignedCollections,deleteAssignedCollections:e.permissions.deleteAssignedCollections,manageAssignedCollections:e.permissions.editAssignedCollections&&e.permissions.deleteAssignedCollections},r={createNewCollections:e.permissions.createNewCollections,editAnyCollection:e.permissions.editAnyCollection,deleteAnyCollection:e.permissions.deleteAnyCollection,manageAllCollections:e.permissions.createNewCollections&&e.permissions.editAnyCollection&&e.permissions.deleteAnyCollection};e.type===_.je.Custom&&this.permissionsGroup.patchValue({accessEventLogs:e.permissions.accessEventLogs,accessImportExport:e.permissions.accessImportExport,accessReports:e.permissions.accessReports,manageGroups:e.permissions.manageGroups,manageSso:e.permissions.manageSso,managePolicies:e.permissions.managePolicies,manageUsers:e.permissions.manageUsers,manageResetPassword:e.permissions.manageResetPassword,manageAssignedCollectionsGroup:s,manageAllCollectionsGroup:r});const a=t.filter((t=>e.groups.includes(t.id))).flatMap((e=>e.collections.map((t=>{const i=n.find((e=>e.id===t.id));return{group:e,collection:i,accessSelection:t}}))));this.collectionAccessItems=this.collectionAccessItems.concat(a.map((({collection:e,accessSelection:t,group:n})=>Ne(e,i,o,t,n))));const u=function(e,t){if(null==e)return[];return e.collections.filter((e=>!t.find((t=>t.id==e.id)).readonly)).map((e=>({id:e.id,type:w.zD.Collection,permission:(0,w.d4)(e)})))}(e,this.collectionAccessItems),c=function(e){if(null==e)return[];return[].concat(e.map((e=>({id:e,type:w.zD.Group}))))}(e.groups);this.formGroup.removeControl("emails"),this.formGroup.patchValue({type:e.type,externalId:e.externalId,accessAllCollections:e.accessAll,access:u,accessSecretsManager:e.accessSecretsManager,groups:c})}check(e,t){e.checked=null==t?!e.checked:t,e.checked||(e.readOnly=!1)}selectAll(e){this.collections.forEach((t=>this.check(t,e)))}setRequestPermissions(e,t){if(t)return new Z.Q;const n={accessEventLogs:this.permissionsGroup.value.accessEventLogs,accessImportExport:this.permissionsGroup.value.accessImportExport,accessReports:this.permissionsGroup.value.accessReports,manageGroups:this.permissionsGroup.value.manageGroups,manageSso:this.permissionsGroup.value.manageSso,managePolicies:this.permissionsGroup.value.managePolicies,manageUsers:this.permissionsGroup.value.manageUsers,manageResetPassword:this.permissionsGroup.value.manageResetPassword,createNewCollections:this.permissionsGroup.value.manageAllCollectionsGroup.createNewCollections,editAnyCollection:this.permissionsGroup.value.manageAllCollectionsGroup.editAnyCollection,deleteAnyCollection:this.permissionsGroup.value.manageAllCollectionsGroup.deleteAnyCollection,editAssignedCollections:this.permissionsGroup.value.manageAssignedCollectionsGroup.editAssignedCollections,deleteAssignedCollections:this.permissionsGroup.value.manageAssignedCollectionsGroup.deleteAssignedCollections};return Object.assign(e,n)}handleDependentPermissions(){this.permissionsGroup.value.manageResetPassword&&!this.permissionsGroup.value.manageUsers&&(this.permissionsGroup.value.manageUsers=!0,document.getElementById("manageUsers").checked=!0,this.platformUtilsService.showToast("info",null,this.i18nService.t("accountRecoveryManageUsers")))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cancel(){return ce(this,void 0,void 0,(function*(){this.close(ue.Canceled)}))}close(e){this.dialogRef.close(e)}noMasterPasswordConfirmationDialog(){return this.dialogService.openSimpleDialog({title:{key:"removeOrgUserNoMasterPasswordTitle"},content:{key:"removeOrgUserNoMasterPasswordDesc",placeholders:[this.params.name]},type:"warning"})}}function Ne(e,t,n,i,o){return{type:w.zD.Collection,id:o?`${e.id}-${o.id}`:e.id,labelName:e.name,listName:e.name,readonly:void 0!==o||!e.canEditUserAccess(t,n),readonlyPermission:i?(0,w.d4)(i):void 0,viaGroupName:null==o?void 0:o.name}}Pe.ɵfac=function(e){return new(e||Pe)(q.Y36(a.Kt),q.Y36(a.zj),q.Y36(S.D),q.Y36(C.P),q.Y36(u.qu),q.Y36(A.m),q.Y36(x.lT),q.Y36(x.XD),q.Y36(k.t),q.Y36(I.x),q.Y36(P.E),q.Y36(N.BR),q.Y36(f.Mn))},Pe.ɵcmp=q.Xpm({type:Pe,selectors:[["ng-component"]],decls:41,vars:21,consts:[[3,"formGroup","bitSubmit"],["dialogSize","large",3,"disablePadding"],["bitDialogTitle",""],["class","tw-text-sm tw-normal-case tw-text-muted",4,"ngIf"],["bitBadge","","variant","secondary",4,"ngIf"],["bitDialogContent",""],[4,"ngIf"],[3,"selectedIndex","selectedIndexChange",4,"ngIf"],["bitDialogFooter",""],["type","submit","bitButton","","bitFormButton","","buttonType","primary",3,"disabled"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"disabled","click"],[1,"tw-ml-auto"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"bitAction","disabled",4,"ngIf"],["type","button","bitIconButton","bwi-trash","buttonType","danger","bitFormButton","",3,"appA11yTitle","bitAction","disabled",4,"ngIf"],[1,"tw-text-sm","tw-normal-case","tw-text-muted"],["bitBadge","","variant","secondary"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"tw-sr-only"],[3,"selectedIndex","selectedIndexChange"],[3,"label"],["formControlName","type"],["bitLink","","target","_blank","rel","noreferrer","href","https://bitwarden.com/help/user-types-access-control/",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],["id","userTypeUser",3,"value"],["id","userTypeManager",3,"value",4,"ngIf"],["id","userTypeAdmin",3,"value"],["id","userTypeOwner",3,"value"],["id","userTypeCustom",3,"value","disabled"],[4,"ngIf","ngIfElse"],["enterprise",""],["bitInput","","type","text","formControlName","externalId"],[3,"label",4,"ngIf"],["class","tw-mb-6",4,"ngIf"],["formControlName","access",3,"permissionMode","showGroupColumn","items","columnHeader","selectorLabelText","emptySelectionText","flexibleCollectionsEnabled","hideMultiSelect",4,"ngIf"],["bitTypography","body1"],["id","emails","type","text","appAutoFocus","","bitInput","","formControlName","emails"],["id","userTypeManager",3,"value"],["bitLink","","href","https://bitwarden.com/contact/","target","_blank","rel","noreferrer"],["customPermissionsFC",""],["bitTypography","h3"],[1,"tw-grid","tw-grid-cols-12","tw-gap-4",3,"formGroup"],[1,"tw-col-span-6"],[1,"tw-mb-3"],[1,"tw-font-semibold"],[1,"tw-mb-2","tw-mr-2","tw-mt-0"],["parentId","manageAssignedCollections",3,"checkboxes"],["type","checkbox","bitCheckbox","","formControlName","accessEventLogs"],["type","checkbox","bitCheckbox","","formControlName","accessImportExport"],["type","checkbox","bitCheckbox","","formControlName","accessReports"],["parentId","manageAllCollections",3,"checkboxes"],["type","checkbox","bitCheckbox","","formControlName","manageGroups"],["type","checkbox","bitCheckbox","","formControlName","manageSso"],["type","checkbox","bitCheckbox","","formControlName","managePolicies"],["id","manageUsers","type","checkbox","bitCheckbox","","formControlName","manageUsers",3,"change"],["type","checkbox","bitCheckbox","","formControlName","manageResetPassword",3,"change"],[1,"tw-col-span-4"],[1,"tw-mt-4"],["bitLink","","target","_blank","rel","noreferrer","href","https://bitwarden.com/help/manage-your-organization/#access-to-secrets-manager",3,"appA11yTitle"],[1,"tw-text-muted"],["type","checkbox","bitCheckbox","","formControlName","accessSecretsManager",3,"disabled"],[1,"tw-mb-6"],["formControlName","groups",3,"items","columnHeader","selectorLabelText","emptySelectionText","flexibleCollectionsEnabled","hideMultiSelect"],["type","checkbox","bitCheckbox","","formControlName","accessAllCollections"],["bitLink","","target","_blank","rel","noreferrer","href","https://bitwarden.com/help/user-types-access-control/#access-control",3,"appA11yTitle"],["formControlName","access",3,"permissionMode","showGroupColumn","items","columnHeader","selectorLabelText","emptySelectionText","flexibleCollectionsEnabled","hideMultiSelect"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"bitAction","disabled"],["type","button","bitIconButton","bwi-trash","buttonType","danger","bitFormButton","",3,"appA11yTitle","bitAction","disabled"]],template:function(e,t){1&e&&(q.TgZ(0,"form",0),q._uU(1,"\n  "),q.TgZ(2,"bit-dialog",1),q._uU(3,"\n    "),q.TgZ(4,"span",2),q._uU(5),q.YNc(6,le,2,1,"span",3),q._uU(7,"\n      "),q.YNc(8,de,3,3,"span",4),q._uU(9,"\n    "),q.qZA(),q._uU(10,"\n    "),q.TgZ(11,"div",5),q._uU(12,"\n      "),q.YNc(13,pe,9,6,"ng-container",6),q._uU(14,"\n      "),q.YNc(15,Se,104,62,"bit-tab-group",7),q.ALo(16,"async"),q._uU(17,"\n    "),q.qZA(),q._uU(18,"\n    "),q.ynx(19,8),q._uU(20,"\n      "),q.TgZ(21,"button",9),q._uU(22),q.ALo(23,"i18n"),q.qZA(),q._uU(24,"\n      "),q.TgZ(25,"button",10),q.NdJ("click",(function(){return t.cancel()})),q._uU(26),q.ALo(27,"i18n"),q.qZA(),q._uU(28,"\n      "),q.TgZ(29,"div",11),q._uU(30,"\n        "),q.YNc(31,Ce,3,5,"button",12),q._uU(32,"\n        "),q.YNc(33,ke,3,5,"button",12),q._uU(34,"\n        "),q.YNc(35,Ie,2,5,"button",13),q._uU(36,"\n      "),q.qZA(),q._uU(37,"\n    "),q.BQk(),q._uU(38,"\n  "),q.qZA(),q._uU(39,"\n"),q.qZA(),q._uU(40,"\n")),2&e&&(q.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),q.xp6(2),q.Q6J("disablePadding",!t.loading),q.xp6(3),q.hij("\n      ",t.title,"\n      "),q.xp6(1),q.Q6J("ngIf",!t.loading&&t.params.name),q.xp6(2),q.Q6J("ngIf",t.isRevoked),q.xp6(5),q.Q6J("ngIf",t.loading),q.xp6(2),q.Q6J("ngIf",q.lcZ(16,15,!t.loading&&t.organization$)),q.xp6(6),q.Q6J("disabled",t.loading),q.xp6(1),q.hij("\n        ",q.lcZ(23,17,"save"),"\n      "),q.xp6(3),q.Q6J("disabled",t.loading),q.xp6(1),q.hij("\n        ",q.lcZ(27,19,"cancel"),"\n      "),q.xp6(5),q.Q6J("ngIf",t.editMode&&t.isRevoked),q.xp6(2),q.Q6J("ngIf",t.editMode&&!t.isRevoked),q.xp6(2),q.Q6J("ngIf",t.editMode))},dependencies:[M.O5,u._Y,u.Fj,u.Wl,u.JJ,u.JL,u.sg,u.u,L.B,O.Q,Q.b,J.u,Y.l,z.r,R.b,G.a,E.d,B.G,j.A,D.u,$.M,F.Q,K.r,H._,W.w,V.Q,X.i,ee.t,te.f,re,M.Ov,ie.C],encapsulation:2});var Me=n(20953);class Le{}Le.ɵfac=function(e){return new(e||Le)},Le.ɵmod=q.oAB({type:Le}),Le.ɵinj=q.cJS({imports:[r.P,Me.c]});var Oe=n(8111),Qe=n(47064),Je=n(95097),Ye=n(59157),ze=n(59260),Re=n(70032),Ge=n(19576),Ee=n(61374);class Be{}var je=n(90692),De=n(44882),$e=n(68134),Fe=n(54193),Ke=n(33287),He=n(27027),We=n(42844),Ve=n(2138),Xe=n(76528),et=n(66459),tt=n(1113),nt=n(18362),it=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{u(i.next(e))}catch(t){s(t)}}function a(e){try{u(i.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};class ot{constructor(e,t,n,i,o){this.data=e,this.dialogRef=t,this.cryptoService=n,this.logService=i,this.organizationManagementPreferencesService=o,this.loading=!0,this.formGroup=new u.cw({dontAskAgain:new u.NI(!1)}),this.submit=()=>it(this,void 0,void 0,(function*(){this.loading||(this.formGroup.value.dontAskAgain&&(yield this.organizationManagementPreferencesService.autoConfirmFingerPrints.set(!0)),yield this.data.confirmUser(this.publicKey),this.dialogRef.close())})),this.name=e.name,this.userId=e.userId,this.publicKey=e.publicKey}ngOnInit(){return it(this,void 0,void 0,(function*(){try{if(null!=this.publicKey){const e=yield this.cryptoService.getFingerprint(this.userId,this.publicKey);null!=e&&(this.fingerprint=e.join("-"))}}catch(e){this.logService.error(e)}this.loading=!1}))}static open(e,t){return e.open(ot,t)}}ot.ɵfac=function(e){return new(e||ot)(q.Y36(a.Kt),q.Y36(a.zj),q.Y36(Xe.$),q.Y36(et.$),q.Y36(tt.R))},ot.ɵcmp=q.Xpm({type:ot,selectors:[["app-user-confirm"]],decls:50,vars:22,consts:[[3,"formGroup","bitSubmit"],["dialogSize","default"],["bitDialogTitle",""],["bitTypography","body1",1,"tw-text-muted"],["bitDialogContent",""],["bitTypography","body1"],["bitLink","","href","https://bitwarden.com/help/fingerprint-phrase/","target","_blank","rel","noreferrer"],["type","checkbox","bitCheckbox","","formControlName","dontAskAgain"],["bitDialogFooter",""],["bitButton","","bitFormButton","","type","submit","buttonType","primary"],["bitButton","","bitFormButton","","type","button","buttonType","secondary","bitDialogClose",""]],template:function(e,t){1&e&&(q.TgZ(0,"form",0),q._uU(1,"\n  "),q.TgZ(2,"bit-dialog",1),q._uU(3,"\n    "),q.TgZ(4,"span",2),q._uU(5),q.ALo(6,"i18n"),q.TgZ(7,"span",3),q._uU(8),q.qZA(),q._uU(9,"\n    "),q.qZA(),q._uU(10,"\n    "),q.ynx(11,4),q._uU(12,"\n      "),q.TgZ(13,"p",5),q._uU(14),q.ALo(15,"i18n"),q.TgZ(16,"a",6),q._uU(17),q.ALo(18,"i18n"),q.qZA(),q._uU(19,"\n      "),q.qZA(),q._uU(20,"\n      "),q.TgZ(21,"p",5),q._uU(22,"\n        "),q.TgZ(23,"code"),q._uU(24),q.qZA(),q._uU(25,"\n      "),q.qZA(),q._uU(26,"\n      "),q.TgZ(27,"bit-form-control"),q._uU(28,"\n        "),q._UZ(29,"input",7),q._uU(30,"\n        "),q.TgZ(31,"bit-label"),q._uU(32),q.ALo(33,"i18n"),q.qZA(),q._uU(34,"\n      "),q.qZA(),q._uU(35,"\n    "),q.BQk(),q._uU(36,"\n    "),q.ynx(37,8),q._uU(38,"\n      "),q.TgZ(39,"button",9),q._uU(40),q.ALo(41,"i18n"),q.qZA(),q._uU(42,"\n      "),q.TgZ(43,"button",10),q._uU(44),q.ALo(45,"i18n"),q.qZA(),q._uU(46,"\n    "),q.BQk(),q._uU(47,"\n  "),q.qZA(),q._uU(48,"\n"),q.qZA(),q._uU(49,"\n")),2&e&&(q.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),q.xp6(5),q.hij("\n      ",q.lcZ(6,10,"confirmUser"),"\n      "),q.xp6(3),q.Oqu(t.name),q.xp6(6),q.hij("\n        ",q.lcZ(15,12,"fingerprintEnsureIntegrityVerify"),"\n        "),q.xp6(3),q.hij("\n          ",q.lcZ(18,14,"learnMore"),""),q.xp6(7),q.Oqu(t.fingerprint),q.xp6(8),q.Oqu(q.lcZ(33,16,"dontAskFingerprintAgain")),q.xp6(8),q.hij("\n        ",q.lcZ(41,18,"confirm"),"\n      "),q.xp6(4),q.hij("\n        ",q.lcZ(45,20,"cancel"),"\n      "))},dependencies:[u._Y,u.Wl,u.JJ,u.JL,u.sg,u.u,Q.b,J.u,z.r,R.b,G.a,nt.f,j.A,D.u,K.r,ee.t,ie.C],encapsulation:2});var st=n(55602),rt=n(14494),at=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{u(i.next(e))}catch(t){s(t)}}function a(e){try{u(i.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};const ut=["confirmTemplate"];class ct{get allCount(){return null!=this.activeUsers?this.activeUsers.length:0}get invitedCount(){return this.statusMap.has(this.userStatusType.Invited)?this.statusMap.get(this.userStatusType.Invited).length:0}get acceptedCount(){return this.statusMap.has(this.userStatusType.Accepted)?this.statusMap.get(this.userStatusType.Accepted).length:0}get confirmedCount(){return this.statusMap.has(this.userStatusType.Confirmed)?this.statusMap.get(this.userStatusType.Confirmed).length:0}get revokedCount(){return this.statusMap.has(this.userStatusType.Revoked)?this.statusMap.get(this.userStatusType.Revoked).length:0}get showConfirmUsers(){return null!=this.activeUsers&&null!=this.statusMap&&this.activeUsers.length>1&&this.confirmedCount>0&&this.confirmedCount<3&&this.acceptedCount>0}get showBulkConfirmUsers(){return this.acceptedCount>0}constructor(e,t,n,i,o,s,r,a,c,l){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.cryptoService=i,this.validationService=o,this.modalService=s,this.logService=r,this.userNamePipe=a,this.dialogService=c,this.organizationManagementPreferencesService=l,this.dataSource=new Ve.G,this.statusMap=new Map,this.allUsers=[],this.activeUsers=[],this.searchControl=new u.NI("",{nonNullable:!0}),this.searchControl.valueChanges.pipe((0,He.b)(200),(0,Je.sL)()).subscribe((e=>this.dataSource.filter=e))}load(){return at(this,void 0,void 0,(function*(){const e=yield this.getUsers();this.statusMap.clear(),this.activeUsers=[];for(const t of ne.c.iterateEnum(this.userStatusType))this.statusMap.set(t,[]);e instanceof We.L?this.allUsers=null!=e.data&&e.data.length>0?e.data:[]:Array.isArray(e)&&(this.allUsers=e),this.allUsers.forEach((e=>{this.statusMap.has(e.status)?this.statusMap.get(e.status).push(e):this.statusMap.set(e.status,[e]),e.status!==this.userStatusType.Revoked&&this.activeUsers.push(e)})),this.filter(this.status),this.firstLoaded=!0}))}filter(e){this.status=e,null!=this.status?this.dataSource.data=this.statusMap.get(this.status):this.dataSource.data=this.activeUsers,this.selectAll(!1)}checkUser(e,t){e.checked=null==t?!e.checked:t}selectAll(e){e&&this.selectAll(!1);const t=this.dataSource.filteredData,n=e&&t.length>500?500:t.length;for(let i=0;i<n;i++)this.checkUser(t[i],e)}invite(){this.edit(null)}removeUserConfirmationDialog(e){return at(this,void 0,void 0,(function*(){return this.dialogService.openSimpleDialog({title:this.userNamePipe.transform(e),content:{key:"removeUserConfirmation"},type:"warning"})}))}remove(e){return at(this,void 0,void 0,(function*(){if(!(yield this.removeUserConfirmationDialog(e)))return!1;this.actionPromise=this.deleteUser(e.id);try{yield this.actionPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("removedUserId",this.userNamePipe.transform(e))),this.removeUser(e)}catch(t){this.validationService.showError(t)}this.actionPromise=null}))}revokeUserConfirmationDialog(e){return at(this,void 0,void 0,(function*(){return this.dialogService.openSimpleDialog({title:{key:"revokeAccess",placeholders:[this.userNamePipe.transform(e)]},content:this.revokeWarningMessage(),acceptButtonText:{key:"revokeAccess"},type:"warning"})}))}revoke(e){return at(this,void 0,void 0,(function*(){if(!(yield this.revokeUserConfirmationDialog(e)))return!1;this.actionPromise=this.revokeUser(e.id);try{yield this.actionPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("revokedUserId",this.userNamePipe.transform(e))),yield this.load()}catch(t){this.validationService.showError(t)}this.actionPromise=null}))}restore(e){return at(this,void 0,void 0,(function*(){this.actionPromise=this.restoreUser(e.id);try{yield this.actionPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("restoredUserId",this.userNamePipe.transform(e))),yield this.load()}catch(t){this.validationService.showError(t)}this.actionPromise=null}))}reinvite(e){return at(this,void 0,void 0,(function*(){if(null==this.actionPromise){this.actionPromise=this.reinviteUser(e.id);try{yield this.actionPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("hasBeenReinvited",this.userNamePipe.transform(e)))}catch(t){this.validationService.showError(t)}this.actionPromise=null}}))}confirm(e){return at(this,void 0,void 0,(function*(){const t=t=>at(this,void 0,void 0,(function*(){try{this.actionPromise=this.confirmUser(e,t),yield this.actionPromise,function(t){e.status=t.userStatusType.Confirmed;const n=t.statusMap.get(t.userStatusType.Accepted).indexOf(e);n>-1&&(t.statusMap.get(t.userStatusType.Accepted).splice(n,1),t.statusMap.get(t.userStatusType.Confirmed).push(e))}(this),this.platformUtilsService.showToast("success",null,this.i18nService.t("hasBeenConfirmed",this.userNamePipe.transform(e)))}catch(n){throw this.validationService.showError(n),n}finally{this.actionPromise=null}}));if(null==this.actionPromise)try{const i=yield this.apiService.getUserPublicKey(e.userId),o=ne.c.fromB64ToArray(i.publicKey),s=yield(0,l.z)(this.organizationManagementPreferencesService.autoConfirmFingerPrints.state$);if(null==s||!s){const n=ot.open(this.dialogService,{data:{name:this.userNamePipe.transform(e),userId:null!=e?e.userId:null,publicKey:o,confirmUser:()=>t(o)}});return void(yield(0,Re.n)(n.closed))}try{const t=yield this.cryptoService.getFingerprint(e.userId,o);this.logService.info(`User's fingerprint: ${t.join("-")}`)}catch(n){this.logService.error(n)}yield t(o)}catch(n){this.logService.error(`Handled exception: ${n}`)}}))}revokeWarningMessage(){return this.i18nService.t("revokeUserConfirmation")}getCheckedUsers(){return this.dataSource.data.filter((e=>e.checked))}removeUser(e){let t=this.dataSource.data.indexOf(e);if(t>-1){const e=[...this.dataSource.data];e.splice(t,1),this.dataSource.data=e}t=this.allUsers.indexOf(e),t>-1&&this.allUsers.splice(t,1),this.statusMap.has(e.status)&&(t=this.statusMap.get(e.status).indexOf(e),t>-1&&this.statusMap.get(e.status).splice(t,1))}}ct.ɵfac=function(e){return new(e||ct)(q.Y36(st.s),q.Y36(S.D),q.Y36(C.P),q.Y36(Xe.$),q.Y36(rt.R),q.Y36(Ee.Z),q.Y36(et.$),q.Y36(Ge.z),q.Y36(I.x),q.Y36(tt.R))},ct.ɵdir=q.lG2({type:ct,viewQuery:function(e,t){if(1&e&&q.Gf(ut,7,q.s_b),2&e){let e;q.iGM(e=q.CRH())&&(t.confirmModalRef=e.first)}}});var lt=n(50342);class dt{constructor(){this.collections=[],this.groups=[],this.groupNames=[],this.collectionNames=[]}static fromResponse(e){const t=Object.assign(new dt,e);return null!=e.collections&&(t.collections=e.collections.map((e=>new lt.K(e)))),null!=e.groups&&(t.groups=e.groups),t}}class pt{constructor(e){this.keys=e}}var gt=n(53707),ht=n(14970),Ut=n(54735),mt=n(50941),ft=n(26361),_t=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{u(i.next(e))}catch(t){s(t)}}function a(e){try{u(i.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function Zt(e,t){1&e&&(q.TgZ(0,"app-callout",8),q._uU(1),q.ALo(2,"i18n"),q.qZA()),2&e&&(q.xp6(1),q.hij("\n      ",q.lcZ(2,1,"noSelectedUsersApplicable"),"\n    "))}function bt(e,t){if(1&e&&(q.TgZ(0,"app-callout",9),q._uU(1),q.qZA()),2&e){const e=q.oxw();q.xp6(1),q.hij("\n      ",e.error,"\n    ")}}function vt(e,t){if(1&e&&(q.TgZ(0,"p",22),q._uU(1),q.qZA()),2&e){const e=q.oxw().$implicit;q.xp6(1),q.Oqu(e.name)}}function At(e,t){if(1&e&&(q.TgZ(0,"tr",18),q._uU(1,"\n            "),q.TgZ(2,"td",19),q._uU(3,"\n              "),q._UZ(4,"bit-avatar",20),q.ALo(5,"userName"),q._uU(6,"\n            "),q.qZA(),q._uU(7,"\n            "),q.TgZ(8,"td",14),q._uU(9),q.YNc(10,vt,2,1,"p",21),q._uU(11,"\n            "),q.qZA(),q._uU(12,"\n            "),q.TgZ(13,"td",14),q._uU(14),q.qZA(),q._uU(15,"\n          "),q.qZA()),2&e){const e=t.$implicit,n=q.oxw(3);q.xp6(4),q.Q6J("text",q.lcZ(5,5,e))("id",e.id),q.xp6(5),q.hij("\n              ",e.email,"\n              "),q.xp6(1),q.Q6J("ngIf",e.name),q.xp6(4),q.hij("\n              ",n.fingerprints.get(e.id),"\n            ")}}function xt(e,t){if(1&e&&(q.TgZ(0,"p",22),q._uU(1),q.qZA()),2&e){const e=q.oxw().$implicit;q.xp6(1),q.Oqu(e.name)}}function wt(e,t){if(1&e&&(q.TgZ(0,"tr",23),q._uU(1,"\n            "),q.TgZ(2,"td",19),q._uU(3,"\n              "),q._UZ(4,"bit-avatar",20),q.ALo(5,"userName"),q._uU(6,"\n            "),q.qZA(),q._uU(7,"\n            "),q.TgZ(8,"td",14),q._uU(9),q.YNc(10,xt,2,1,"p",21),q._uU(11,"\n            "),q.qZA(),q._uU(12,"\n            "),q.TgZ(13,"td",14),q._uU(14),q.ALo(15,"i18n"),q.qZA(),q._uU(16,"\n          "),q.qZA()),2&e){const e=t.$implicit;q.xp6(4),q.Q6J("text",q.lcZ(5,5,e))("id",e.id),q.xp6(5),q.hij("\n              ",e.email,"\n              "),q.xp6(1),q.Q6J("ngIf",e.name),q.xp6(4),q.hij("\n              ",q.lcZ(15,7,"bulkFilteredMessage"),"\n            ")}}function yt(e,t){if(1&e&&(q._uU(0,"\n          "),q.YNc(1,At,16,7,"tr",16),q._uU(2,"\n          "),q.YNc(3,wt,17,9,"tr",17),q._uU(4,"\n        ")),2&e){const e=q.oxw(2);q.xp6(1),q.Q6J("ngForOf",e.filteredUsers),q.xp6(2),q.Q6J("ngForOf",e.excludedUsers)}}function Tt(e,t){1&e&&(q.ynx(0),q._uU(1,"\n      "),q.TgZ(2,"p",10),q._uU(3),q.ALo(4,"i18n"),q.TgZ(5,"a",11),q._uU(6),q.ALo(7,"i18n"),q.qZA(),q._uU(8,"\n      "),q.qZA(),q._uU(9,"\n      "),q.TgZ(10,"bit-table"),q._uU(11,"\n        "),q.ynx(12,12),q._uU(13,"\n          "),q.TgZ(14,"tr"),q._uU(15,"\n            "),q.TgZ(16,"th",13),q._uU(17),q.ALo(18,"i18n"),q.qZA(),q._uU(19,"\n            "),q.TgZ(20,"th",14),q._uU(21),q.ALo(22,"i18n"),q.qZA(),q._uU(23,"\n          "),q.qZA(),q._uU(24,"\n        "),q.BQk(),q._uU(25,"\n        "),q.YNc(26,yt,5,2,"ng-template",15),q._uU(27,"\n      "),q.qZA(),q._uU(28,"\n    "),q.BQk()),2&e&&(q.xp6(3),q.hij("\n        ",q.lcZ(4,4,"fingerprintEnsureIntegrityVerify"),"\n        "),q.xp6(3),q.hij("\n          ",q.lcZ(7,6,"learnMore"),""),q.xp6(11),q.Oqu(q.lcZ(18,8,"user")),q.xp6(4),q.Oqu(q.lcZ(22,10,"fingerprint")))}function qt(e,t){if(1&e&&(q.TgZ(0,"p",22),q._uU(1),q.qZA()),2&e){const e=q.oxw().$implicit;q.xp6(1),q.Oqu(e.name)}}function St(e,t){if(1&e&&(q.TgZ(0,"td",14),q._uU(1),q.qZA()),2&e){const e=q.oxw().$implicit,t=q.oxw(3);q.xp6(1),q.hij("\n              ",t.statuses.get(e.id),"\n            ")}}function Ct(e,t){1&e&&(q.TgZ(0,"td",14),q._uU(1),q.ALo(2,"i18n"),q.qZA()),2&e&&(q.xp6(1),q.hij("\n              ",q.lcZ(2,1,"bulkFilteredMessage"),"\n            "))}function kt(e,t){if(1&e&&(q.TgZ(0,"tr",18),q._uU(1,"\n            "),q.TgZ(2,"td",19),q._uU(3,"\n              "),q._UZ(4,"bit-avatar",20),q.ALo(5,"userName"),q._uU(6,"\n            "),q.qZA(),q._uU(7,"\n            "),q.TgZ(8,"td",14),q._uU(9),q.YNc(10,qt,2,1,"p",21),q._uU(11,"\n            "),q.qZA(),q._uU(12,"\n            "),q.YNc(13,St,2,1,"td",24),q._uU(14,"\n            "),q.YNc(15,Ct,3,3,"td",24),q._uU(16,"\n          "),q.qZA()),2&e){const e=t.$implicit,n=q.oxw(3);q.xp6(4),q.Q6J("text",q.lcZ(5,6,e))("id",e.id),q.xp6(5),q.hij("\n              ",e.email,"\n              "),q.xp6(1),q.Q6J("ngIf",e.name),q.xp6(3),q.Q6J("ngIf",n.statuses.has(e.id)),q.xp6(2),q.Q6J("ngIf",!n.statuses.has(e.id))}}function It(e,t){if(1&e&&(q._uU(0,"\n          "),q.YNc(1,kt,17,8,"tr",16),q._uU(2,"\n        ")),2&e){const e=q.oxw(2);q.xp6(1),q.Q6J("ngForOf",e.filteredUsers)}}function Pt(e,t){1&e&&(q.ynx(0),q._uU(1,"\n      "),q.TgZ(2,"bit-table"),q._uU(3,"\n        "),q.ynx(4,12),q._uU(5,"\n          "),q.TgZ(6,"tr"),q._uU(7,"\n            "),q.TgZ(8,"th",13),q._uU(9),q.ALo(10,"i18n"),q.qZA(),q._uU(11,"\n            "),q.TgZ(12,"th",14),q._uU(13),q.ALo(14,"i18n"),q.qZA(),q._uU(15,"\n          "),q.qZA(),q._uU(16,"\n        "),q.BQk(),q._uU(17,"\n        "),q.YNc(18,It,3,1,"ng-template",15),q._uU(19,"\n      "),q.qZA(),q._uU(20,"\n    "),q.BQk()),2&e&&(q.xp6(9),q.Oqu(q.lcZ(10,2,"user")),q.xp6(4),q.Oqu(q.lcZ(14,4,"status")))}function Nt(e,t){if(1&e){const e=q.EpF();q.TgZ(0,"button",25),q.NdJ("click",(function(){q.CHM(e);const t=q.oxw();return q.KtG(t.submit())})),q._uU(1),q.ALo(2,"i18n"),q.qZA()}if(2&e){const e=q.oxw();q.Q6J("disabled",e.loading),q.xp6(1),q.hij("\n      ",q.lcZ(2,2,"confirm"),"\n    ")}}class Mt{constructor(e,t,n,i,o){this.data=e,this.cryptoService=t,this.apiService=n,this.organizationUserService=i,this.i18nService=o,this.publicKeys=new Map,this.fingerprints=new Map,this.statuses=new Map,this.loading=!0,this.done=!1,this.organizationId=e.organizationId,this.users=e.users}ngOnInit(){return _t(this,void 0,void 0,(function*(){this.excludedUsers=this.users.filter((e=>!this.isAccepted(e))),this.filteredUsers=this.users.filter((e=>this.isAccepted(e))),this.filteredUsers.length<=0&&(this.done=!0);const e=yield this.getPublicKeys();for(const t of e.data){const e=ne.c.fromB64ToArray(t.key),n=yield this.cryptoService.getFingerprint(t.userId,e);null!=n&&(this.publicKeys.set(t.id,e),this.fingerprints.set(t.id,n.join("-")))}this.loading=!1}))}submit(){return _t(this,void 0,void 0,(function*(){this.loading=!0;try{const e=yield this.getCryptoKey(),t=[];for(const n of this.filteredUsers){const i=this.publicKeys.get(n.id);if(null==i)continue;const o=yield this.cryptoService.rsaEncrypt(e.key,i);t.push({id:n.id,key:o.encryptedString})}(yield this.postConfirmRequest(t)).data.forEach((e=>{const t=""!==e.error?e.error:this.i18nService.t("bulkConfirmMessage");this.statuses.set(e.id,t)})),this.done=!0}catch(e){this.error=e.message}this.loading=!1}))}isAccepted(e){return e.status===_.Dn.Accepted}getPublicKeys(){return _t(this,void 0,void 0,(function*(){return yield this.organizationUserService.postOrganizationUsersPublicKey(this.organizationId,this.filteredUsers.map((e=>e.id)))}))}getCryptoKey(){return this.cryptoService.getOrgKey(this.organizationId)}postConfirmRequest(e){return _t(this,void 0,void 0,(function*(){const t=new pt(e);return yield this.organizationUserService.postOrganizationUserBulkConfirm(this.organizationId,t)}))}static open(e,t){return e.open(Mt,t)}}Mt.ɵfac=function(e){return new(e||Mt)(q.Y36(a.Kt),q.Y36(Xe.$),q.Y36(st.s),q.Y36(k.t),q.Y36(S.D))},Mt.ɵcmp=q.Xpm({type:Mt,selectors:[["app-bulk-confirm"]],decls:24,vars:12,consts:[["dialogSize","large",3,"title","loading"],["bitDialogContent",""],["type","danger",4,"ngIf"],["type","error",4,"ngIf"],[4,"ngIf"],["bitDialogFooter",""],["bitButton","","type","submit","buttonType","primary",3,"disabled","click",4,"ngIf"],["bitButton","","type","button","buttonType","secondary","bitDialogClose",""],["type","danger"],["type","error"],["bitTypography","body1"],["bitLink","","href","https://bitwarden.com/help/fingerprint-phrase/","target","_blank","rel","noreferrer"],["header",""],["bitCell","","colspan","2"],["bitCell",""],["body",""],["bitRow","","alignContent","middle",4,"ngFor","ngForOf"],["alignContent","middle",4,"ngFor","ngForOf"],["bitRow","","alignContent","middle"],["bitCell","",1,"tw-w-5"],["size","small",3,"text","id"],["class","tw-text-muted tw-text-sm",4,"ngIf"],[1,"tw-text-muted","tw-text-sm"],["alignContent","middle"],["bitCell","",4,"ngIf"],["bitButton","","type","submit","buttonType","primary",3,"disabled","click"]],template:function(e,t){1&e&&(q.TgZ(0,"bit-dialog",0),q.ALo(1,"i18n"),q._uU(2,"\n  "),q.ynx(3,1),q._uU(4,"\n    "),q.YNc(5,Zt,3,3,"app-callout",2),q._uU(6,"\n    "),q.YNc(7,bt,2,1,"app-callout",3),q._uU(8,"\n    "),q.YNc(9,Tt,29,12,"ng-container",4),q._uU(10,"\n    "),q.YNc(11,Pt,21,6,"ng-container",4),q._uU(12,"\n  "),q.BQk(),q._uU(13,"\n  "),q.ynx(14,5),q._uU(15,"\n    "),q.YNc(16,Nt,3,4,"button",6),q._uU(17,"\n    "),q.TgZ(18,"button",7),q._uU(19),q.ALo(20,"i18n"),q.qZA(),q._uU(21,"\n  "),q.BQk(),q._uU(22,"\n"),q.qZA(),q._uU(23,"\n")),2&e&&(q.Q6J("title",q.lcZ(1,8,"confirmUsers"))("loading",t.loading),q.xp6(5),q.Q6J("ngIf",t.filteredUsers.length<=0),q.xp6(2),q.Q6J("ngIf",t.error),q.xp6(2),q.Q6J("ngIf",!t.loading&&!t.done),q.xp6(2),q.Q6J("ngIf",!t.loading&&t.done),q.xp6(5),q.Q6J("ngIf",!t.done),q.xp6(3),q.hij("\n      ",q.lcZ(20,10,"close"),"\n    "))},dependencies:[M.sg,M.O5,gt.O,ht.A,z.r,G.a,nt.f,K.r,Ut.a,mt.Y,ft.v,Ut.f,ee.t,ie.C,Ge.z],encapsulation:2});var Lt=n(73672),Ot=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{u(i.next(e))}catch(t){s(t)}}function a(e){try{u(i.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function Qt(e,t){if(1&e&&(q.TgZ(0,"div",16),q._uU(1),q.qZA()),2&e){const e=q.oxw().$implicit;q.xp6(1),q.hij("\n                  ",e.email,"\n                ")}}function Jt(e,t){if(1&e&&(q.TgZ(0,"tr",11),q._uU(1,"\n          "),q.TgZ(2,"td",5),q._uU(3,"\n            "),q.TgZ(4,"div",12),q._uU(5,"\n              "),q._UZ(6,"bit-avatar",13),q.ALo(7,"userName"),q._uU(8,"\n              "),q.TgZ(9,"div",14),q._uU(10,"\n                "),q.TgZ(11,"div"),q._uU(12),q.ALo(13,"userName"),q.qZA(),q._uU(14,"\n                "),q.YNc(15,Qt,2,1,"div",15),q._uU(16,"\n              "),q.qZA(),q._uU(17,"\n            "),q.qZA(),q._uU(18,"\n          "),q.qZA(),q._uU(19,"\n          "),q.TgZ(20,"td",5),q._uU(21),q.ALo(22,"userType"),q.qZA(),q._uU(23,"\n        "),q.qZA()),2&e){const e=t.$implicit;q.xp6(6),q.Q6J("text",q.lcZ(7,6,e))("id",e.userId)("color",e.avatarColor),q.xp6(6),q.hij("\n                  ",q.lcZ(13,8,e),"\n                "),q.xp6(3),q.Q6J("ngIf",e.name),q.xp6(6),q.Oqu(q.lcZ(22,10,e.type))}}function Yt(e,t){if(1&e&&(q._uU(0,"\n        "),q.YNc(1,Jt,24,12,"tr",10),q.ALo(2,"async"),q._uU(3,"\n      ")),2&e){const e=t.$implicit;q.xp6(1),q.Q6J("ngForOf",q.lcZ(2,1,e))}}class zt{constructor(e,t,n,i,o){this.dialogRef=e,this.data=t,this.organizationUserService=n,this.platformUtilsService=i,this.i18nService=o,this.dataSource=new Ve.G,this.submit=()=>Ot(this,void 0,void 0,(function*(){yield this.organizationUserService.putOrganizationUserBulkEnableSecretsManager(this.data.orgId,this.dataSource.data.map((e=>e.id))),this.platformUtilsService.showToast("success",null,this.i18nService.t("activatedAccessToSecretsManager")),this.dialogRef.close()}))}ngOnInit(){this.dataSource.data=this.data.users}static open(e,t){return e.open(zt,{data:t})}}zt.ɵfac=function(e){return new(e||zt)(q.Y36(a.zj),q.Y36(a.Kt),q.Y36(k.t),q.Y36(C.P),q.Y36(S.D))},zt.ɵcmp=q.Xpm({type:zt,selectors:[["ng-component"]],decls:44,vars:20,consts:[["dialogSize","large"],["bitDialogTitle",""],["bitDialogContent",""],[3,"dataSource"],["header",""],["bitCell",""],["body",""],["bitDialogFooter",""],["type","button","bitButton","","buttonType","primary",3,"bitAction"],["type","button","bitButton","","buttonType","secondary","bitDialogClose",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],[1,"tw-flex","tw-items-center"],["size","small",1,"tw-mr-3",3,"text","id","color"],[1,"tw-flex","tw-flex-col"],["class","tw-text-sm tw-text-muted",4,"ngIf"],[1,"tw-text-sm","tw-text-muted"]],template:function(e,t){1&e&&(q.TgZ(0,"bit-dialog",0),q._uU(1,"\n  "),q.TgZ(2,"span",1),q._uU(3),q.ALo(4,"i18n"),q.qZA(),q._uU(5,"\n  "),q.TgZ(6,"span",2),q._uU(7,"\n    "),q.TgZ(8,"p"),q._uU(9),q.ALo(10,"i18n"),q.qZA(),q._uU(11,"\n    "),q.TgZ(12,"bit-table",3),q._uU(13,"\n      "),q.ynx(14,4),q._uU(15,"\n        "),q.TgZ(16,"tr"),q._uU(17,"\n          "),q.TgZ(18,"th",5),q._uU(19),q.ALo(20,"i18n"),q.qZA(),q._uU(21,"\n          "),q.TgZ(22,"th",5),q._uU(23),q.ALo(24,"i18n"),q.qZA(),q._uU(25,"\n        "),q.qZA(),q._uU(26,"\n      "),q.BQk(),q._uU(27,"\n      "),q.YNc(28,Yt,4,3,"ng-template",6),q._uU(29,"\n    "),q.qZA(),q._uU(30,"\n  "),q.qZA(),q._uU(31,"\n  "),q.ynx(32,7),q._uU(33,"\n    "),q.TgZ(34,"button",8),q._uU(35),q.ALo(36,"i18n"),q.qZA(),q._uU(37,"\n    "),q.TgZ(38,"button",9),q._uU(39),q.ALo(40,"i18n"),q.qZA(),q._uU(41,"\n  "),q.BQk(),q._uU(42,"\n"),q.qZA(),q._uU(43,"\n")),2&e&&(q.xp6(3),q.Oqu(q.lcZ(4,8,"activateSecretsManager")),q.xp6(6),q.Oqu(q.lcZ(10,10,"bulkEnableSecretsManagerDescription")),q.xp6(3),q.Q6J("dataSource",t.dataSource),q.xp6(7),q.Oqu(q.lcZ(20,12,"member")),q.xp6(4),q.Oqu(q.lcZ(24,14,"role")),q.xp6(11),q.Q6J("bitAction",t.submit),q.xp6(1),q.hij("\n      ",q.lcZ(36,16,"activateAccess"),"\n    "),q.xp6(4),q.hij("\n      ",q.lcZ(40,18,"close"),"\n    "))},dependencies:[M.sg,M.O5,O.Q,ht.A,z.r,G.a,nt.f,Ut.a,mt.Y,ft.v,Ut.f,M.Ov,ie.C,Ge.z,Lt.t],encapsulation:2});var Rt=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{u(i.next(e))}catch(t){s(t)}}function a(e){try{u(i.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function Gt(e,t){1&e&&(q.TgZ(0,"app-callout",8),q._uU(1),q.ALo(2,"i18n"),q.qZA()),2&e&&(q.xp6(1),q.hij("\n      ",q.lcZ(2,1,"noSelectedUsersApplicable"),"\n    "))}function Et(e,t){if(1&e&&(q.TgZ(0,"app-callout",9),q._uU(1),q.qZA()),2&e){const e=q.oxw();q.xp6(1),q.hij("\n      ",e.error,"\n    ")}}function Bt(e,t){1&e&&(q.TgZ(0,"p",16),q._uU(1),q.ALo(2,"i18n"),q.qZA()),2&e&&(q.xp6(1),q.hij("\n          ",q.lcZ(2,1,"removeMembersWithoutMasterPasswordWarning"),"\n        "))}function jt(e,t){if(1&e&&(q.TgZ(0,"app-callout",15),q._uU(1,"\n        "),q.TgZ(2,"p",16),q._uU(3),q.qZA(),q._uU(4,"\n        "),q.YNc(5,Bt,3,3,"p",17),q._uU(6,"\n      "),q.qZA()),2&e){const e=q.oxw(2);q.xp6(3),q.Oqu(e.removeUsersWarning),q.xp6(2),q.Q6J("ngIf",e.showNoMasterPasswordWarning)}}function Dt(e,t){1&e&&(q.TgZ(0,"th",18),q._uU(1),q.ALo(2,"i18n"),q.qZA()),2&e&&(q.xp6(1),q.Oqu(q.lcZ(2,1,"details")))}function $t(e,t){if(1&e&&(q.TgZ(0,"small",24),q._uU(1),q.qZA()),2&e){const e=q.oxw().$implicit;q.xp6(1),q.Oqu(e.name)}}function Ft(e,t){1&e&&(q.ynx(0),q._uU(1," - "),q.BQk())}function Kt(e,t){1&e&&(q.ynx(0),q._uU(1,"\n                  "),q._UZ(2,"i",26),q._uU(3),q.ALo(4,"i18n"),q.BQk()),2&e&&(q.xp6(3),q.hij("\n                  ",q.lcZ(4,1,"noMasterPassword"),"\n                "))}function Ht(e,t){if(1&e&&(q.TgZ(0,"td",18),q._uU(1,"\n              "),q.TgZ(2,"span",25),q._uU(3,"\n                "),q.YNc(4,Ft,2,0,"ng-container",4),q._uU(5,"\n                "),q.YNc(6,Kt,5,3,"ng-container",4),q._uU(7,"\n              "),q.qZA(),q._uU(8,"\n            "),q.qZA()),2&e){const e=q.oxw().$implicit;q.xp6(4),q.Q6J("ngIf",!0===e.hasMasterPassword),q.xp6(2),q.Q6J("ngIf",!1===e.hasMasterPassword)}}function Wt(e,t){if(1&e&&(q.TgZ(0,"tr",20),q._uU(1,"\n            "),q.TgZ(2,"td",21),q._uU(3,"\n              "),q._UZ(4,"bit-avatar",22),q.ALo(5,"userName"),q._uU(6,"\n            "),q.qZA(),q._uU(7,"\n            "),q.TgZ(8,"td",18),q._uU(9),q.YNc(10,$t,2,1,"small",23),q._uU(11,"\n            "),q.qZA(),q._uU(12,"\n            "),q.YNc(13,Ht,9,2,"td",13),q._uU(14,"\n          "),q.qZA()),2&e){const e=t.$implicit,n=q.oxw(3);q.xp6(4),q.Q6J("text",q.lcZ(5,5,e))("id",e.id),q.xp6(5),q.hij("\n              ",e.email,"\n              "),q.xp6(1),q.Q6J("ngIf",e.name),q.xp6(3),q.Q6J("ngIf",n.showNoMasterPasswordWarning)}}function Vt(e,t){if(1&e&&(q._uU(0,"\n          "),q.YNc(1,Wt,15,7,"tr",19),q._uU(2,"\n        ")),2&e){const e=q.oxw(2);q.xp6(1),q.Q6J("ngForOf",e.users)}}function Xt(e,t){if(1&e&&(q.ynx(0),q._uU(1,"\n      "),q.YNc(2,jt,7,2,"app-callout",10),q._uU(3,"\n      "),q.TgZ(4,"bit-table"),q._uU(5,"\n        "),q.ynx(6,11),q._uU(7,"\n          "),q.TgZ(8,"tr"),q._uU(9,"\n            "),q.TgZ(10,"th",12),q._uU(11),q.ALo(12,"i18n"),q.qZA(),q._uU(13,"\n            "),q.YNc(14,Dt,3,3,"th",13),q._uU(15,"\n          "),q.qZA(),q._uU(16,"\n        "),q.BQk(),q._uU(17,"\n        "),q.YNc(18,Vt,3,1,"ng-template",14),q._uU(19,"\n      "),q.qZA(),q._uU(20,"\n    "),q.BQk()),2&e){const e=q.oxw();q.xp6(2),q.Q6J("ngIf",e.users.length>0&&!e.error),q.xp6(9),q.Oqu(q.lcZ(12,3,"user")),q.xp6(3),q.Q6J("ngIf",e.showNoMasterPasswordWarning)}}function en(e,t){if(1&e&&(q.TgZ(0,"small",24),q._uU(1),q.qZA()),2&e){const e=q.oxw().$implicit;q.xp6(1),q.Oqu(e.name)}}function tn(e,t){if(1&e&&(q.TgZ(0,"td",18),q._uU(1),q.qZA()),2&e){const e=q.oxw().$implicit,t=q.oxw(3);q.xp6(1),q.hij("\n              ",t.statuses.get(e.id),"\n            ")}}function nn(e,t){1&e&&(q.TgZ(0,"td",18),q._uU(1),q.ALo(2,"i18n"),q.qZA()),2&e&&(q.xp6(1),q.hij("\n              ",q.lcZ(2,1,"bulkFilteredMessage"),"\n            "))}function on(e,t){if(1&e&&(q.TgZ(0,"tr",20),q._uU(1,"\n            "),q.TgZ(2,"td",21),q._uU(3,"\n              "),q._UZ(4,"bit-avatar",22),q.ALo(5,"userName"),q._uU(6,"\n            "),q.qZA(),q._uU(7,"\n            "),q.TgZ(8,"td",18),q._uU(9),q.YNc(10,en,2,1,"small",23),q._uU(11,"\n            "),q.qZA(),q._uU(12,"\n            "),q.YNc(13,tn,2,1,"td",13),q._uU(14,"\n            "),q.YNc(15,nn,3,3,"td",13),q._uU(16,"\n          "),q.qZA()),2&e){const e=t.$implicit,n=q.oxw(3);q.xp6(4),q.Q6J("text",q.lcZ(5,6,e))("id",e.id),q.xp6(5),q.hij("\n              ",e.email,"\n              "),q.xp6(1),q.Q6J("ngIf",e.name),q.xp6(3),q.Q6J("ngIf",n.statuses.has(e.id)),q.xp6(2),q.Q6J("ngIf",!n.statuses.has(e.id))}}function sn(e,t){if(1&e&&(q._uU(0,"\n          "),q.YNc(1,on,17,8,"tr",19),q._uU(2,"\n        ")),2&e){const e=q.oxw(2);q.xp6(1),q.Q6J("ngForOf",e.users)}}function rn(e,t){1&e&&(q.ynx(0),q._uU(1,"\n      "),q.TgZ(2,"bit-table"),q._uU(3,"\n        "),q.ynx(4,11),q._uU(5,"\n          "),q.TgZ(6,"tr"),q._uU(7,"\n            "),q.TgZ(8,"th",12),q._uU(9),q.ALo(10,"i18n"),q.qZA(),q._uU(11,"\n            "),q.TgZ(12,"th",18),q._uU(13),q.ALo(14,"i18n"),q.qZA(),q._uU(15,"\n          "),q.qZA(),q._uU(16,"\n        "),q.BQk(),q._uU(17,"\n        "),q.YNc(18,sn,3,1,"ng-template",14),q._uU(19,"\n      "),q.qZA(),q._uU(20,"\n    "),q.BQk()),2&e&&(q.xp6(9),q.Oqu(q.lcZ(10,2,"user")),q.xp6(4),q.Oqu(q.lcZ(14,4,"status")))}function an(e,t){if(1&e&&(q.TgZ(0,"button",27),q._uU(1),q.ALo(2,"i18n"),q.qZA()),2&e){const e=q.oxw();q.Q6J("disabled",e.loading)("bitAction",e.submit),q.xp6(1),q.hij("\n      ",q.lcZ(2,3,"removeUsers"),"\n    ")}}class un{constructor(e,t,n,i){this.data=e,this.apiService=t,this.i18nService=n,this.organizationUserService=i,this.statuses=new Map,this.loading=!1,this.done=!1,this.showNoMasterPasswordWarning=!1,this.submit=()=>Rt(this,void 0,void 0,(function*(){this.loading=!0;try{(yield this.deleteUsers()).data.forEach((e=>{const t=""!==e.error?e.error:this.i18nService.t("bulkRemovedMessage");this.statuses.set(e.id,t)})),this.done=!0}catch(e){this.error=e.message}this.loading=!1})),this.organizationId=e.organizationId,this.users=e.users,this.showNoMasterPasswordWarning=this.users.some((e=>e.status>_.Dn.Invited&&!1===e.hasMasterPassword))}deleteUsers(){return Rt(this,void 0,void 0,(function*(){return yield this.organizationUserService.deleteManyOrganizationUsers(this.organizationId,this.users.map((e=>e.id)))}))}get removeUsersWarning(){return this.i18nService.t("removeOrgUsersConfirmation")}static open(e,t){return e.open(un,t)}}un.ɵfac=function(e){return new(e||un)(q.Y36(a.Kt),q.Y36(st.s),q.Y36(S.D),q.Y36(k.t))},un.ɵcmp=q.Xpm({type:un,selectors:[["app-bulk-remove"]],decls:24,vars:11,consts:[["dialogSize","large",3,"title"],["bitDialogContent",""],["type","danger",4,"ngIf"],["type","error",4,"ngIf"],[4,"ngIf"],["bitDialogFooter",""],["bitButton","","type","submit","buttonType","primary",3,"disabled","bitAction",4,"ngIf"],["bitButton","","type","button","buttonType","secondary","bitDialogClose",""],["type","danger"],["type","error"],["type","warning",4,"ngIf"],["header",""],["bitCell","","colspan","2"],["bitCell","",4,"ngIf"],["body",""],["type","warning"],["bitTypography","body1"],["bitTypography","body1",4,"ngIf"],["bitCell",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["bitCell","",1,"tw-w-5"],["size","small",3,"text","id"],["class","tw-text-muted tw-block",4,"ngIf"],[1,"tw-text-muted","tw-block"],[1,"tw-text-muted","tw-block","tw-lowercase"],["aria-hidden","true",1,"bwi","bwi-exclamation-triangle"],["bitButton","","type","submit","buttonType","primary",3,"disabled","bitAction"]],template:function(e,t){1&e&&(q.TgZ(0,"bit-dialog",0),q.ALo(1,"i18n"),q._uU(2,"\n  "),q.ynx(3,1),q._uU(4,"\n    "),q.YNc(5,Gt,3,3,"app-callout",2),q._uU(6,"\n    "),q.YNc(7,Et,2,1,"app-callout",3),q._uU(8,"\n    "),q.YNc(9,Xt,21,5,"ng-container",4),q._uU(10,"\n    "),q.YNc(11,rn,21,6,"ng-container",4),q._uU(12,"\n  "),q.BQk(),q._uU(13,"\n  "),q.ynx(14,5),q._uU(15,"\n    "),q.YNc(16,an,3,5,"button",6),q._uU(17,"\n    "),q.TgZ(18,"button",7),q._uU(19),q.ALo(20,"i18n"),q.qZA(),q._uU(21,"\n  "),q.BQk(),q._uU(22,"\n"),q.qZA(),q._uU(23,"\n")),2&e&&(q.Q6J("title",q.lcZ(1,7,"removeUsers")),q.xp6(5),q.Q6J("ngIf",t.users.length<=0),q.xp6(2),q.Q6J("ngIf",t.error),q.xp6(2),q.Q6J("ngIf",!t.done),q.xp6(2),q.Q6J("ngIf",t.done),q.xp6(5),q.Q6J("ngIf",!t.done&&t.users.length>0),q.xp6(3),q.hij("\n      ",q.lcZ(20,9,"close"),"\n    "))},dependencies:[M.sg,M.O5,gt.O,O.Q,ht.A,z.r,G.a,nt.f,Ut.a,mt.Y,ft.v,Ut.f,ee.t,ie.C,Ge.z],encapsulation:2});var cn=n(24083),ln=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{u(i.next(e))}catch(t){s(t)}}function a(e){try{u(i.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function dn(e,t){1&e&&(q.TgZ(0,"bit-callout",7),q._uU(1),q.ALo(2,"i18n"),q.qZA()),2&e&&(q.xp6(1),q.hij("\n      ",q.lcZ(2,1,"noSelectedUsersApplicable"),"\n    "))}function pn(e,t){if(1&e&&(q.TgZ(0,"bit-callout",7),q._uU(1),q.qZA()),2&e){const e=q.oxw();q.xp6(1),q.hij("\n      ",e.error,"\n    ")}}function gn(e,t){1&e&&(q.TgZ(0,"p"),q._uU(1),q.ALo(2,"i18n"),q.qZA()),2&e&&(q.xp6(1),q.hij("\n          ",q.lcZ(2,1,"removeMembersWithoutMasterPasswordWarning"),"\n        "))}function hn(e,t){if(1&e&&(q.TgZ(0,"bit-callout",13),q._uU(1,"\n        "),q.TgZ(2,"p"),q._uU(3),q.ALo(4,"i18n"),q.qZA(),q._uU(5,"\n        "),q.YNc(6,gn,3,3,"p",3),q._uU(7,"\n      "),q.qZA()),2&e){const e=q.oxw(2);q.xp6(3),q.Oqu(q.lcZ(4,2,"revokeUsersWarning")),q.xp6(3),q.Q6J("ngIf",e.showNoMasterPasswordWarning)}}function Un(e,t){1&e&&(q.TgZ(0,"th",14),q._uU(1),q.ALo(2,"i18n"),q.qZA()),2&e&&(q.xp6(1),q.Oqu(q.lcZ(2,1,"details")))}function mn(e,t){if(1&e&&(q.TgZ(0,"small",20),q._uU(1),q.qZA()),2&e){const e=q.oxw().$implicit;q.xp6(1),q.Oqu(e.name)}}function fn(e,t){1&e&&(q.ynx(0),q._uU(1," - "),q.BQk())}function _n(e,t){1&e&&(q.ynx(0),q._uU(1,"\n                  "),q._UZ(2,"i",22),q._uU(3),q.ALo(4,"i18n"),q.BQk()),2&e&&(q.xp6(3),q.hij("\n                  ",q.lcZ(4,1,"noMasterPassword"),"\n                "))}function Zn(e,t){if(1&e&&(q.TgZ(0,"td",14),q._uU(1,"\n              "),q.TgZ(2,"span",21),q._uU(3,"\n                "),q.YNc(4,fn,2,0,"ng-container",3),q._uU(5,"\n                "),q.YNc(6,_n,5,3,"ng-container",3),q._uU(7,"\n              "),q.qZA(),q._uU(8,"\n            "),q.qZA()),2&e){const e=q.oxw().$implicit;q.xp6(4),q.Q6J("ngIf",!0===e.hasMasterPassword),q.xp6(2),q.Q6J("ngIf",!1===e.hasMasterPassword)}}function bn(e,t){if(1&e&&(q.TgZ(0,"tr",16),q._uU(1,"\n            "),q.TgZ(2,"td",17),q._uU(3,"\n              "),q._UZ(4,"bit-avatar",18),q.ALo(5,"userName"),q._uU(6,"\n            "),q.qZA(),q._uU(7,"\n            "),q.TgZ(8,"td",14),q._uU(9),q.YNc(10,mn,2,1,"small",19),q._uU(11,"\n            "),q.qZA(),q._uU(12,"\n            "),q.YNc(13,Zn,9,2,"td",11),q._uU(14,"\n          "),q.qZA()),2&e){const e=t.$implicit,n=q.oxw(3);q.xp6(4),q.Q6J("text",q.lcZ(5,5,e))("id",e.id),q.xp6(5),q.hij("\n              ",e.email,"\n              "),q.xp6(1),q.Q6J("ngIf",e.name),q.xp6(3),q.Q6J("ngIf",n.showNoMasterPasswordWarning)}}function vn(e,t){if(1&e&&(q._uU(0,"\n          "),q.YNc(1,bn,15,7,"tr",15),q._uU(2,"\n        ")),2&e){const e=q.oxw(2);q.xp6(1),q.Q6J("ngForOf",e.users)}}function An(e,t){if(1&e&&(q.ynx(0),q._uU(1,"\n      "),q.YNc(2,hn,8,4,"bit-callout",8),q._uU(3,"\n\n      "),q.TgZ(4,"bit-table"),q._uU(5,"\n        "),q.ynx(6,9),q._uU(7,"\n          "),q.TgZ(8,"tr"),q._uU(9,"\n            "),q.TgZ(10,"th",10),q._uU(11),q.ALo(12,"i18n"),q.qZA(),q._uU(13,"\n            "),q.YNc(14,Un,3,3,"th",11),q._uU(15,"\n          "),q.qZA(),q._uU(16,"\n        "),q.BQk(),q._uU(17,"\n        "),q.YNc(18,vn,3,1,"ng-template",12),q._uU(19,"\n      "),q.qZA(),q._uU(20,"\n    "),q.BQk()),2&e){const e=q.oxw();q.xp6(2),q.Q6J("ngIf",e.users.length>0&&!e.error&&e.isRevoking),q.xp6(9),q.Oqu(q.lcZ(12,3,"user")),q.xp6(3),q.Q6J("ngIf",e.showNoMasterPasswordWarning)}}function xn(e,t){if(1&e&&(q.TgZ(0,"small",20),q._uU(1),q.qZA()),2&e){const e=q.oxw().$implicit;q.xp6(1),q.Oqu(e.name)}}function wn(e,t){if(1&e&&(q.TgZ(0,"td",14),q._uU(1),q.qZA()),2&e){const e=q.oxw().$implicit,t=q.oxw(3);q.xp6(1),q.hij("\n              ",t.statuses.get(e.id),"\n            ")}}function yn(e,t){1&e&&(q.TgZ(0,"td",14),q._uU(1),q.ALo(2,"i18n"),q.qZA()),2&e&&(q.xp6(1),q.hij("\n              ",q.lcZ(2,1,"bulkFilteredMessage"),"\n            "))}function Tn(e,t){if(1&e&&(q.TgZ(0,"tr",16),q._uU(1,"\n            "),q.TgZ(2,"td",17),q._uU(3,"\n              "),q._UZ(4,"bit-avatar",18),q.ALo(5,"userName"),q._uU(6,"\n            "),q.qZA(),q._uU(7,"\n            "),q.TgZ(8,"td",14),q._uU(9),q.YNc(10,xn,2,1,"small",19),q._uU(11,"\n            "),q.qZA(),q._uU(12,"\n            "),q.YNc(13,wn,2,1,"td",11),q._uU(14,"\n            "),q.YNc(15,yn,3,3,"td",11),q._uU(16,"\n          "),q.qZA()),2&e){const e=t.$implicit,n=q.oxw(3);q.xp6(4),q.Q6J("text",q.lcZ(5,6,e))("id",e.id),q.xp6(5),q.hij("\n              ",e.email,"\n              "),q.xp6(1),q.Q6J("ngIf",e.name),q.xp6(3),q.Q6J("ngIf",n.statuses.has(e.id)),q.xp6(2),q.Q6J("ngIf",!n.statuses.has(e.id))}}function qn(e,t){if(1&e&&(q._uU(0,"\n          "),q.YNc(1,Tn,17,8,"tr",15),q._uU(2,"\n        ")),2&e){const e=q.oxw(2);q.xp6(1),q.Q6J("ngForOf",e.users)}}function Sn(e,t){1&e&&(q.ynx(0),q._uU(1,"\n      "),q.TgZ(2,"bit-table"),q._uU(3,"\n        "),q.ynx(4,9),q._uU(5,"\n          "),q.TgZ(6,"tr"),q._uU(7,"\n            "),q.TgZ(8,"th",10),q._uU(9),q.ALo(10,"i18n"),q.qZA(),q._uU(11,"\n            "),q.TgZ(12,"th"),q._uU(13),q.ALo(14,"i18n"),q.qZA(),q._uU(15,"\n          "),q.qZA(),q._uU(16,"\n        "),q.BQk(),q._uU(17,"\n        "),q.YNc(18,qn,3,1,"ng-template",12),q._uU(19,"\n      "),q.qZA(),q._uU(20,"\n    "),q.BQk()),2&e&&(q.xp6(9),q.Oqu(q.lcZ(10,2,"user")),q.xp6(4),q.Oqu(q.lcZ(14,4,"status")))}function Cn(e,t){if(1&e&&(q.TgZ(0,"button",23),q._uU(1),q.qZA()),2&e){const e=q.oxw();q.Q6J("bitAction",e.submit),q.xp6(1),q.hij("\n      ",e.bulkTitle,"\n    ")}}class kn{constructor(e,t,n){this.i18nService=e,this.organizationUserService=t,this.data=n,this.statuses=new Map,this.loading=!1,this.done=!1,this.showNoMasterPasswordWarning=!1,this.submit=()=>ln(this,void 0,void 0,(function*(){try{const e=yield this.performBulkUserAction(),t=this.isRevoking?"bulkRevokedMessage":"bulkRestoredMessage";e.data.forEach((e=>{const n=""!==e.error?e.error:this.i18nService.t(t);this.statuses.set(e.id,n)})),this.done=!0}catch(e){this.error=e.message}})),this.isRevoking=n.isRevoking,this.organizationId=n.organizationId,this.users=n.users,this.showNoMasterPasswordWarning=this.users.some((e=>e.status>_.Dn.Invited&&!1===e.hasMasterPassword))}get bulkTitle(){const e=this.isRevoking?"revokeUsers":"restoreUsers";return this.i18nService.t(e)}performBulkUserAction(){return ln(this,void 0,void 0,(function*(){const e=this.users.map((e=>e.id));return this.isRevoking?yield this.organizationUserService.revokeManyOrganizationUsers(this.organizationId,e):yield this.organizationUserService.restoreManyOrganizationUsers(this.organizationId,e)}))}static open(e,t){return e.open(kn,{data:t})}}kn.ɵfac=function(e){return new(e||kn)(q.Y36(S.D),q.Y36(k.t),q.Y36(a.Kt))},kn.ɵcmp=q.Xpm({type:kn,selectors:[["app-bulk-restore-revoke"]],decls:29,vars:9,consts:[["bitDialogTitle",""],["bitDialogContent",""],["type","danger",4,"ngIf"],[4,"ngIf"],["bitDialogFooter",""],["type","button","bitButton","",3,"bitAction",4,"ngIf"],["type","button","bitButton","","buttonType","secondary","bitDialogClose",""],["type","danger"],["type","warning",4,"ngIf"],["header",""],["bitCell","","colspan","2"],["bitCell","",4,"ngIf"],["body",""],["type","warning"],["bitCell",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["bitCell","","width","30"],["size","small",3,"text","id"],["class","tw-block tw-text-muted",4,"ngIf"],[1,"tw-block","tw-text-muted"],[1,"tw-block","tw-lowercase","tw-text-muted"],["aria-hidden","true",1,"bwi","bwi-exclamation-triangle"],["type","button","bitButton","",3,"bitAction"]],template:function(e,t){1&e&&(q.TgZ(0,"bit-dialog"),q._uU(1,"\n  "),q.ynx(2,0),q._uU(3,"\n    "),q.TgZ(4,"h1"),q._uU(5),q.qZA(),q._uU(6,"\n  "),q.BQk(),q._uU(7,"\n  "),q.TgZ(8,"div",1),q._uU(9,"\n    "),q.YNc(10,dn,3,3,"bit-callout",2),q._uU(11,"\n\n    "),q.YNc(12,pn,2,1,"bit-callout",2),q._uU(13,"\n\n    "),q.YNc(14,An,21,5,"ng-container",3),q._uU(15,"\n\n    "),q.YNc(16,Sn,21,6,"ng-container",3),q._uU(17,"\n  "),q.qZA(),q._uU(18,"\n  "),q.ynx(19,4),q._uU(20,"\n    "),q.YNc(21,Cn,2,2,"button",5),q._uU(22,"\n    "),q.TgZ(23,"button",6),q._uU(24),q.ALo(25,"i18n"),q.qZA(),q._uU(26,"\n  "),q.BQk(),q._uU(27,"\n"),q.qZA(),q._uU(28,"\n")),2&e&&(q.xp6(5),q.Oqu(t.bulkTitle),q.xp6(5),q.Q6J("ngIf",t.users.length<=0),q.xp6(2),q.Q6J("ngIf",t.error),q.xp6(2),q.Q6J("ngIf",!t.done),q.xp6(2),q.Q6J("ngIf",t.done),q.xp6(5),q.Q6J("ngIf",!t.done&&t.users.length>0),q.xp6(3),q.hij("\n      ",q.lcZ(25,7,"close"),"\n    "))},dependencies:[M.sg,M.O5,O.Q,ht.A,z.r,cn.O,G.a,nt.f,Ut.a,mt.Y,ft.v,Ut.f,ie.C,Ge.z],encapsulation:2});var In=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{u(i.next(e))}catch(t){s(t)}}function a(e){try{u(i.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function Pn(e,t){1&e&&(q.TgZ(0,"div",6),q._uU(1,"\n      "),q._UZ(2,"i",7),q.ALo(3,"i18n"),q._uU(4),q.ALo(5,"i18n"),q.qZA()),2&e&&(q.xp6(2),q.s9C("title",q.lcZ(3,2,"loading")),q.xp6(2),q.hij("\n      ",q.lcZ(5,4,"loading"),"\n    "))}function Nn(e,t){if(1&e&&(q.TgZ(0,"small",19),q._uU(1),q.qZA()),2&e){const e=q.oxw().$implicit;q.xp6(1),q.Oqu(e.user.name)}}function Mn(e,t){if(1&e&&(q.TgZ(0,"td",20),q._uU(1),q.qZA()),2&e){const e=q.oxw().$implicit;q.xp6(1),q.hij("\n            ",e.message,"\n          ")}}function Ln(e,t){if(1&e&&(q.TgZ(0,"td",10),q._uU(1),q.qZA()),2&e){const e=q.oxw().$implicit;q.xp6(1),q.hij("\n            ",e.message,"\n          ")}}function On(e,t){if(1&e&&(q.TgZ(0,"tr",13),q._uU(1,"\n          "),q.TgZ(2,"td",14),q._uU(3,"\n            "),q._UZ(4,"bit-avatar",15),q.ALo(5,"userName"),q._uU(6,"\n          "),q.qZA(),q._uU(7,"\n          "),q.TgZ(8,"td",10),q._uU(9),q.YNc(10,Nn,2,1,"small",16),q._uU(11,"\n          "),q.qZA(),q._uU(12,"\n          "),q.YNc(13,Mn,2,1,"td",17),q._uU(14,"\n          "),q.YNc(15,Ln,2,1,"td",18),q._uU(16,"\n        "),q.qZA()),2&e){const e=t.$implicit;q.xp6(4),q.Q6J("text",q.lcZ(5,6,e.user))("id",e.user.id),q.xp6(5),q.hij("\n            ",e.user.email,"\n            "),q.xp6(1),q.Q6J("ngIf",e.user.name),q.xp6(3),q.Q6J("ngIf",e.error),q.xp6(2),q.Q6J("ngIf",!e.error)}}function Qn(e,t){if(1&e&&(q._uU(0,"\n        "),q.YNc(1,On,17,8,"tr",12),q._uU(2,"\n      ")),2&e){const e=q.oxw(2);q.xp6(1),q.Q6J("ngForOf",e.users)}}function Jn(e,t){1&e&&(q.TgZ(0,"bit-table"),q._uU(1,"\n      "),q.ynx(2,8),q._uU(3,"\n        "),q.TgZ(4,"tr"),q._uU(5,"\n          "),q.TgZ(6,"th",9),q._uU(7),q.ALo(8,"i18n"),q.qZA(),q._uU(9,"\n          "),q.TgZ(10,"th",10),q._uU(11),q.ALo(12,"i18n"),q.qZA(),q._uU(13,"\n        "),q.qZA(),q._uU(14,"\n      "),q.BQk(),q._uU(15,"\n      "),q.YNc(16,Qn,3,1,"ng-template",11),q._uU(17,"\n    "),q.qZA()),2&e&&(q.xp6(7),q.Oqu(q.lcZ(8,2,"user")),q.xp6(4),q.Oqu(q.lcZ(12,4,"status")))}class Yn{constructor(e,t,n){this.data=e,this.i18nService=t,this.logService=n,this.loading=!1}ngOnInit(){return In(this,void 0,void 0,(function*(){this.loading=!0,yield this.showBulkStatus(this.data)}))}showBulkStatus(e){return In(this,void 0,void 0,(function*(){try{const t=(yield e.request).data.filter((e=>""!==e.error)).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.id]:t.error})),{}),n=e.filteredUsers.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.id]:t})),{});this.users=e.users.map((i=>{var o;let s=null!==(o=t[i.id])&&void 0!==o?o:e.successfullMessage;return n.hasOwnProperty(i.id)||(s=this.i18nService.t("bulkFilteredMessage")),{user:i,error:t.hasOwnProperty(i.id),message:s}})),this.loading=!1}catch(t){this.logService.error(t)}}))}static open(e,t){return e.open(Yn,t)}}Yn.ɵfac=function(e){return new(e||Yn)(q.Y36(a.Kt),q.Y36(S.D),q.Y36(et.$))},Yn.ɵcmp=q.Xpm({type:Yn,selectors:[["app-bulk-status"]],decls:18,vars:8,consts:[["dialogSize","large",3,"title"],["bitDialogContent",""],["class","tw-text-center",4,"ngIf"],[4,"ngIf"],["bitDialogFooter",""],["bitButton","","type","button","buttonType","secondary","bitDialogClose",""],[1,"tw-text-center"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["header",""],["colspan","2","bitCell",""],["bitCell",""],["body",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["width","30","bitCell",""],["size","small",3,"text","id"],["class","text-muted d-block",4,"ngIf"],["class","tw-text-danger","bitCell","",4,"ngIf"],["bitCell","",4,"ngIf"],[1,"text-muted","d-block"],["bitCell","",1,"tw-text-danger"]],template:function(e,t){1&e&&(q.TgZ(0,"bit-dialog",0),q.ALo(1,"i18n"),q._uU(2,"\n  "),q.ynx(3,1),q._uU(4,"\n    "),q.YNc(5,Pn,6,6,"div",2),q._uU(6,"\n    "),q.YNc(7,Jn,18,6,"bit-table",3),q._uU(8,"\n  "),q.BQk(),q._uU(9,"\n  "),q.ynx(10,4),q._uU(11,"\n    "),q.TgZ(12,"button",5),q._uU(13),q.ALo(14,"i18n"),q.qZA(),q._uU(15,"\n  "),q.BQk(),q._uU(16,"\n"),q.qZA(),q._uU(17,"\n")),2&e&&(q.Q6J("title",q.lcZ(1,4,"bulkConfirmStatus")),q.xp6(5),q.Q6J("ngIf",t.loading),q.xp6(2),q.Q6J("ngIf",!t.loading),q.xp6(6),q.hij("\n      ",q.lcZ(14,6,"close"),"\n    "))},dependencies:[M.sg,M.O5,ht.A,z.r,G.a,nt.f,Ut.a,mt.Y,ft.v,Ut.f,ie.C,Ge.z],encapsulation:2});var zn=n(56945),Rn=n(19893),Gn=n(98157),En=n(46811),Bn=n(62357),jn=n(24610),Dn=n(85356),$n=n(2051),Fn=n(33401),Kn=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{u(i.next(e))}catch(t){s(t)}}function a(e){try{u(i.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function Hn(e,t){if(1&e&&(q.TgZ(0,"small",30),q._uU(1),q.qZA()),2&e){const e=q.oxw();q.xp6(1),q.Oqu(e.name)}}function Wn(e,t){if(1&e&&(q.TgZ(0,"auth-password-callout",31),q._uU(1,"\n        "),q.qZA()),2&e){const e=q.oxw();q.Q6J("policy",e.enforcedPolicyOptions)}}const Vn=function(e,t){return{"bwi-eye":e,"bwi-eye-slash":t}};class Xn{constructor(e,t,n,i,o,s,r){this.resetPasswordService=e,this.i18nService=t,this.platformUtilsService=n,this.passwordGenerationService=i,this.policyService=o,this.logService=s,this.dialogService=r,this.onPasswordReset=new q.vpe,this.newPassword=null,this.showPassword=!1,this.destroy$=new c.x}ngOnInit(){return Kn(this,void 0,void 0,(function*(){this.policyService.masterPasswordPolicyOptions$().pipe((0,m.R)(this.destroy$)).subscribe((e=>this.enforcedPolicyOptions=e))}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get loggedOutWarningName(){return null!=this.name?this.name:this.i18nService.t("thisUser")}generatePassword(){var e,t;return Kn(this,void 0,void 0,(function*(){const n=null!==(t=null===(e=yield this.passwordGenerationService.getOptions())||void 0===e?void 0:e[0])&&void 0!==t?t:{};this.newPassword=yield this.passwordGenerationService.generatePassword(n),this.passwordStrengthComponent.updatePasswordStrength(this.newPassword)}))}togglePassword(){this.showPassword=!this.showPassword,document.getElementById("newPassword").focus()}copy(e){null!=e&&(this.platformUtilsService.copyToClipboard(e,{window:window}),this.platformUtilsService.showToast("info",null,this.i18nService.t("valueCopied",this.i18nService.t("password"))))}submit(){return Kn(this,void 0,void 0,(function*(){if(null==this.newPassword||""===this.newPassword)return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPasswordRequired")),!1;if(this.newPassword.length<ne.c.minimumPasswordLength)return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPasswordMinlength",ne.c.minimumPasswordLength)),!1;if(null==this.enforcedPolicyOptions||this.policyService.evaluateMasterPassword(this.passwordStrengthResult.score,this.newPassword,this.enforcedPolicyOptions)){if(this.passwordStrengthResult.score<3){if(!(yield this.dialogService.openSimpleDialog({title:{key:"weakMasterPassword"},content:{key:"weakMasterPasswordDesc"},type:"warning"})))return!1}try{this.formPromise=this.resetPasswordService.resetMasterPassword(this.newPassword,this.email,this.id,this.organizationId),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("resetPasswordSuccess")),this.onPasswordReset.emit()}catch(e){this.logService.error(e)}this.formPromise=null}else this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPasswordPolicyRequirementsNotMet"))}))}getStrengthResult(e){this.passwordStrengthResult=e}}Xn.ɵfac=function(e){return new(e||Xn)(q.Y36(Gn.v),q.Y36(S.D),q.Y36(C.P),q.Y36(Rn.UW),q.Y36(En.d),q.Y36(et.$),q.Y36(I.x))},Xn.ɵcmp=q.Xpm({type:Xn,selectors:[["app-reset-password"]],viewQuery:function(e,t){if(1&e&&q.Gf(zn.Z,5),2&e){let e;q.iGM(e=q.CRH())&&(t.passwordStrengthComponent=e.first)}},inputs:{name:"name",email:"email",id:"id",organizationId:"organizationId"},outputs:{onPasswordReset:"onPasswordReset"},decls:97,vars:44,consts:[["role","dialog","aria-modal","true","aria-labelledby","resetPasswordTitle",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","resetPasswordTitle",1,"modal-title"],["class","text-muted",4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["type","warning"],["message","resetPasswordMasterPasswordPolicyInEffect",3,"policy",4,"ngIf"],[1,"row"],[1,"col","form-group"],[1,"d-flex"],["for","newPassword"],[1,"ml-auto","d-flex"],["href","#","appStopClick","",1,"d-block","mr-2","bwi-icon-above-input",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-fw","bwi-refresh"],[1,"input-group","mb-1"],["id","newPassword","appAutofocus","","name","NewPassword","required","","appInputVerbatim","","autocomplete","new-password",1,"form-control","text-monospace",3,"type","ngModel","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg",3,"ngClass"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-clone"],[3,"password","email","showText","passwordStrengthResult"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"text-muted"],["message","resetPasswordMasterPasswordPolicyInEffect",3,"policy"]],template:function(e,t){if(1&e&&(q.TgZ(0,"div",0),q._uU(1,"\n  "),q.TgZ(2,"div",1),q._uU(3,"\n    "),q.TgZ(4,"form",2,3),q.NdJ("ngSubmit",(function(){return t.submit()})),q._uU(6,"\n      "),q.TgZ(7,"div",4),q._uU(8,"\n        "),q.TgZ(9,"h1",5),q._uU(10),q.ALo(11,"i18n"),q.YNc(12,Hn,2,1,"small",6),q._uU(13,"\n        "),q.qZA(),q._uU(14,"\n        "),q.TgZ(15,"button",7),q.ALo(16,"i18n"),q._uU(17,"\n          "),q.TgZ(18,"span",8),q._uU(19,"×"),q.qZA(),q._uU(20,"\n        "),q.qZA(),q._uU(21,"\n      "),q.qZA(),q._uU(22,"\n      "),q.TgZ(23,"div",9),q._uU(24,"\n        "),q.TgZ(25,"app-callout",10),q._uU(26),q.ALo(27,"i18n"),q.qZA(),q._uU(28,"\n        "),q.YNc(29,Wn,2,1,"auth-password-callout",11),q._uU(30,"\n        "),q.TgZ(31,"div",12),q._uU(32,"\n          "),q.TgZ(33,"div",13),q._uU(34,"\n            "),q.TgZ(35,"div",14),q._uU(36,"\n              "),q.TgZ(37,"label",15),q._uU(38),q.ALo(39,"i18n"),q.qZA(),q._uU(40,"\n              "),q.TgZ(41,"div",16),q._uU(42,"\n                "),q.TgZ(43,"a",17),q.NdJ("click",(function(){return t.generatePassword()})),q.ALo(44,"i18n"),q._uU(45,"\n                  "),q._UZ(46,"i",18),q._uU(47,"\n                "),q.qZA(),q._uU(48,"\n              "),q.qZA(),q._uU(49,"\n            "),q.qZA(),q._uU(50,"\n            "),q.TgZ(51,"div",19),q._uU(52,"\n              "),q.TgZ(53,"input",20),q.NdJ("ngModelChange",(function(e){return t.newPassword=e})),q.qZA(),q._uU(54,"\n              "),q.TgZ(55,"div",21),q._uU(56,"\n                "),q.TgZ(57,"button",22),q.NdJ("click",(function(){return t.togglePassword()})),q.ALo(58,"i18n"),q._uU(59,"\n                  "),q._UZ(60,"i",23),q._uU(61,"\n                "),q.qZA(),q._uU(62,"\n                "),q.TgZ(63,"button",22),q.NdJ("click",(function(){return t.copy(t.newPassword)})),q.ALo(64,"i18n"),q._uU(65,"\n                  "),q._UZ(66,"i",24),q._uU(67,"\n                "),q.qZA(),q._uU(68,"\n              "),q.qZA(),q._uU(69,"\n            "),q.qZA(),q._uU(70,"\n            "),q.TgZ(71,"app-password-strength",25),q.NdJ("passwordStrengthResult",(function(e){return t.getStrengthResult(e)})),q._uU(72,"\n            "),q.qZA(),q._uU(73,"\n          "),q.qZA(),q._uU(74,"\n        "),q.qZA(),q._uU(75,"\n      "),q.qZA(),q._uU(76,"\n      "),q.TgZ(77,"div",26),q._uU(78,"\n        "),q.TgZ(79,"button",27),q._uU(80,"\n          "),q._UZ(81,"i",28),q.ALo(82,"i18n"),q._uU(83,"\n          "),q.TgZ(84,"span"),q._uU(85),q.ALo(86,"i18n"),q.qZA(),q._uU(87,"\n        "),q.qZA(),q._uU(88,"\n        "),q.TgZ(89,"button",29),q._uU(90),q.ALo(91,"i18n"),q.qZA(),q._uU(92,"\n      "),q.qZA(),q._uU(93,"\n    "),q.qZA(),q._uU(94,"\n  "),q.qZA(),q._uU(95,"\n"),q.qZA(),q._uU(96,"\n")),2&e){const e=q.MAs(5);q.xp6(4),q.Q6J("appApiAction",t.formPromise),q.xp6(6),q.hij("\n          ",q.lcZ(11,20,"recoverAccount"),"\n          "),q.xp6(2),q.Q6J("ngIf",t.name),q.xp6(3),q.s9C("appA11yTitle",q.lcZ(16,22,"close")),q.xp6(11),q.hij("",q.xi3(27,24,"resetPasswordLoggedOutWarning",t.loggedOutWarningName),"\n        "),q.xp6(3),q.Q6J("ngIf",t.enforcedPolicyOptions),q.xp6(9),q.Oqu(q.lcZ(39,27,"newPassword")),q.xp6(5),q.s9C("appA11yTitle",q.lcZ(44,29,"generatePassword")),q.xp6(10),q.s9C("type",t.showPassword?"text":"password"),q.Q6J("ngModel",t.newPassword),q.xp6(4),q.s9C("appA11yTitle",q.lcZ(58,31,"toggleVisibility")),q.xp6(3),q.Q6J("ngClass",q.WLB(41,Vn,!t.showPassword,t.showPassword)),q.xp6(3),q.s9C("appA11yTitle",q.lcZ(64,33,"copyPassword")),q.xp6(8),q.Q6J("password",t.newPassword)("email",t.email)("showText",!0),q.xp6(8),q.Q6J("disabled",e.loading),q.xp6(2),q.s9C("title",q.lcZ(82,35,"loading")),q.xp6(4),q.Oqu(q.lcZ(86,37,"save")),q.xp6(5),q.hij("\n          ",q.lcZ(91,39,"cancel"),"\n        ")}},dependencies:[M.mk,M.O5,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.On,u.F,L.B,jn.b,Bn.U,gt.O,Dn.b,$n.O,zn.Z,Fn.e,ie.C],encapsulation:2});var ei=n(50137),ti=n(4871),ni=n(97360),ii=n(31754),oi=n(6677),si=n(1874),ri=n(73974),ai=n(26194),ui=n(44234),ci=n(91849),li=n(19187),di=n(98797),pi=n(65777),gi=n(94239),hi=n(58618),Ui=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{u(i.next(e))}catch(t){s(t)}}function a(e){try{u(i.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};const mi=["groupsTemplate"],fi=["confirmTemplate"],_i=["resetPasswordTemplate"],Zi=["bulkStatusTemplate"],bi=["bulkConfirmTemplate"],vi=["bulkRemoveTemplate"];function Ai(e,t){if(1&e&&(q.TgZ(0,"span",15),q._uU(1),q.qZA()),2&e){const e=q.oxw();q.xp6(1),q.Oqu(e.allCount)}}function xi(e,t){if(1&e&&(q.TgZ(0,"span",15),q._uU(1),q.qZA()),2&e){const e=q.oxw();q.xp6(1),q.Oqu(e.invitedCount)}}function wi(e,t){if(1&e&&(q.TgZ(0,"span",15),q._uU(1),q.qZA()),2&e){const e=q.oxw();q.xp6(1),q.Oqu(e.acceptedCount)}}function yi(e,t){if(1&e&&(q.TgZ(0,"span",15),q._uU(1),q.qZA()),2&e){const e=q.oxw();q.xp6(1),q.Oqu(e.revokedCount)}}function Ti(e,t){1&e&&(q.ynx(0),q._uU(1,"\n  "),q._UZ(2,"i",16),q.ALo(3,"i18n"),q._uU(4,"\n  "),q.TgZ(5,"span",17),q._uU(6),q.ALo(7,"i18n"),q.qZA(),q._uU(8,"\n"),q.BQk()),2&e&&(q.xp6(2),q.s9C("title",q.lcZ(3,2,"loading")),q.xp6(4),q.Oqu(q.lcZ(7,4,"loading")))}function qi(e,t){1&e&&(q.TgZ(0,"p"),q._uU(1),q.ALo(2,"i18n"),q.qZA()),2&e&&(q.xp6(1),q.Oqu(q.lcZ(2,1,"noMembersInList")))}function Si(e,t){1&e&&(q.TgZ(0,"app-callout",39),q.ALo(1,"i18n"),q._uU(2),q.ALo(3,"i18n"),q.qZA()),2&e&&(q.s9C("title",q.lcZ(1,2,"confirmUsers")),q.xp6(2),q.hij("\n      ",q.lcZ(3,4,"usersNeedConfirmed"),"\n    "))}function Ci(e,t){if(1&e){const e=q.EpF();q.ynx(0),q._uU(1,"\n                  "),q.TgZ(2,"button",31),q.NdJ("click",(function(){q.CHM(e);const t=q.oxw(3);return q.KtG(t.bulkEnableSM())})),q._uU(3),q.ALo(4,"i18n"),q.qZA(),q._uU(5,"\n                  "),q._UZ(6,"bit-menu-divider"),q._uU(7,"\n                "),q.BQk()}2&e&&(q.xp6(3),q.hij("\n                    ",q.lcZ(4,1,"activateSecretsManager"),"\n                  "))}function ki(e,t){if(1&e){const e=q.EpF();q.TgZ(0,"button",31),q.NdJ("click",(function(){q.CHM(e);const t=q.oxw(3);return q.KtG(t.bulkConfirm())})),q._uU(1,"\n                  "),q.TgZ(2,"span",40),q._uU(3,"\n                    "),q._UZ(4,"i",41),q._uU(5),q.ALo(6,"i18n"),q.qZA(),q._uU(7,"\n                "),q.qZA()}2&e&&(q.xp6(5),q.hij("\n                    ",q.lcZ(6,1,"confirmSelected"),"\n                  "))}function Ii(e,t){1&e&&(q.TgZ(0,"span",60),q._uU(1),q.ALo(2,"i18n"),q.qZA()),2&e&&(q.xp6(1),q.Oqu(q.lcZ(2,1,"invited")))}function Pi(e,t){1&e&&(q.TgZ(0,"span",61),q._uU(1),q.ALo(2,"i18n"),q.qZA()),2&e&&(q.xp6(1),q.Oqu(q.lcZ(2,1,"needsConfirmation")))}function Ni(e,t){1&e&&(q.TgZ(0,"span",60),q._uU(1),q.ALo(2,"i18n"),q.qZA()),2&e&&(q.xp6(1),q.Oqu(q.lcZ(2,1,"revoked")))}function Mi(e,t){if(1&e&&(q.TgZ(0,"div",62),q._uU(1),q.qZA()),2&e){const e=q.oxw().$implicit;q.xp6(1),q.hij("\n                    ",e.email,"\n                  ")}}function Li(e,t){1&e&&(q.ynx(0),q._uU(1,"\n                "),q._UZ(2,"i",63),q.ALo(3,"i18n"),q._uU(4,"\n                "),q.TgZ(5,"span",64),q._uU(6),q.ALo(7,"i18n"),q.qZA(),q._uU(8,"\n              "),q.BQk()),2&e&&(q.xp6(2),q.s9C("title",q.lcZ(3,2,"userUsingTwoStep")),q.xp6(4),q.Oqu(q.lcZ(7,4,"userUsingTwoStep")))}function Oi(e,t){1&e&&(q.ynx(0),q._uU(1,"\n                "),q._UZ(2,"i",65),q.ALo(3,"i18n"),q._uU(4,"\n                "),q.TgZ(5,"span",64),q._uU(6),q.ALo(7,"i18n"),q.qZA(),q._uU(8,"\n              "),q.BQk()),2&e&&(q.xp6(2),q.s9C("title",q.lcZ(3,2,"enrolledAccountRecovery")),q.xp6(4),q.Oqu(q.lcZ(7,4,"enrolledAccountRecovery")))}function Qi(e,t){if(1&e){const e=q.EpF();q.TgZ(0,"button",31),q.NdJ("click",(function(){q.CHM(e);const t=q.oxw().$implicit,n=q.oxw(4);return q.KtG(n.reinvite(t))})),q._uU(1,"\n                  "),q._UZ(2,"i",66),q._uU(3),q.ALo(4,"i18n"),q.qZA()}2&e&&(q.xp6(3),q.hij("\n                  ",q.lcZ(4,1,"resendInvitation"),"\n                "))}function Ji(e,t){if(1&e){const e=q.EpF();q.TgZ(0,"button",31),q.NdJ("click",(function(){q.CHM(e);const t=q.oxw().$implicit,n=q.oxw(4);return q.KtG(n.confirm(t))})),q._uU(1,"\n                  "),q.TgZ(2,"span",40),q._uU(3,"\n                    "),q._UZ(4,"i",67),q._uU(5),q.ALo(6,"i18n"),q.qZA(),q._uU(7,"\n                "),q.qZA()}2&e&&(q.xp6(5),q.hij(" ",q.lcZ(6,1,"confirm"),"\n                  "))}function Yi(e,t){1&e&&q._UZ(0,"bit-menu-divider")}function zi(e,t){if(1&e){const e=q.EpF();q.TgZ(0,"button",31),q.NdJ("click",(function(){q.CHM(e);const t=q.oxw().$implicit,n=q.oxw(4);return q.KtG(n.edit(t,n.memberTab.Groups))})),q._uU(1,"\n                  "),q._UZ(2,"i",68),q._uU(3),q.ALo(4,"i18n"),q.qZA()}2&e&&(q.xp6(3),q.hij(" ",q.lcZ(4,1,"groups"),"\n                "))}function Ri(e,t){if(1&e){const e=q.EpF();q.TgZ(0,"button",31),q.NdJ("click",(function(){q.CHM(e);const t=q.oxw().$implicit,n=q.oxw(4);return q.KtG(n.openEventsDialog(t))})),q._uU(1,"\n                  "),q._UZ(2,"i",69),q._uU(3),q.ALo(4,"i18n"),q.qZA()}2&e&&(q.xp6(3),q.hij(" ",q.lcZ(4,1,"eventLogs"),"\n                "))}function Gi(e,t){if(1&e){const e=q.EpF();q.TgZ(0,"button",31),q.NdJ("click",(function(){q.CHM(e);const t=q.oxw().$implicit,n=q.oxw(4);return q.KtG(n.resetPassword(t))})),q._uU(1,"\n                  "),q._UZ(2,"i",70),q._uU(3),q.ALo(4,"i18n"),q.qZA()}2&e&&(q.xp6(3),q.hij(" ",q.lcZ(4,1,"recoverAccount"),"\n                "))}function Ei(e,t){if(1&e){const e=q.EpF();q.TgZ(0,"button",31),q.NdJ("click",(function(){q.CHM(e);const t=q.oxw().$implicit,n=q.oxw(4);return q.KtG(n.restore(t))})),q._uU(1,"\n                  "),q._UZ(2,"i",71),q._uU(3),q.ALo(4,"i18n"),q.qZA()}2&e&&(q.xp6(3),q.hij("\n                  ",q.lcZ(4,1,"restoreAccess"),"\n                "))}function Bi(e,t){if(1&e){const e=q.EpF();q.TgZ(0,"button",31),q.NdJ("click",(function(){q.CHM(e);const t=q.oxw().$implicit,n=q.oxw(4);return q.KtG(n.revoke(t))})),q._uU(1,"\n                  "),q._UZ(2,"i",72),q._uU(3),q.ALo(4,"i18n"),q.qZA()}2&e&&(q.xp6(3),q.hij("\n                  ",q.lcZ(4,1,"revokeAccess"),"\n                "))}function ji(e,t){if(1&e){const e=q.EpF();q.TgZ(0,"tr",43),q._uU(1,"\n            "),q.TgZ(2,"td",44),q.NdJ("click",(function(){const t=q.CHM(e).$implicit,n=q.oxw(4);return q.KtG(n.checkUser(t))})),q._uU(3,"\n              "),q.TgZ(4,"input",45),q.NdJ("ngModelChange",(function(t){const n=q.CHM(e).$implicit;return q.KtG(n.checked=t)})),q.qZA(),q._uU(5,"\n            "),q.qZA(),q._uU(6,"\n            "),q.TgZ(7,"td",46),q.NdJ("click",(function(){const t=q.CHM(e).$implicit,n=q.oxw(4);return q.KtG(n.edit(t))})),q._uU(8,"\n              "),q.TgZ(9,"div",47),q._uU(10,"\n                "),q._UZ(11,"bit-avatar",48),q.ALo(12,"userName"),q._uU(13,"\n                "),q.TgZ(14,"div",49),q._uU(15,"\n                  "),q.TgZ(16,"div"),q._uU(17,"\n                    "),q.TgZ(18,"button",50),q._uU(19),q.qZA(),q._uU(20,"\n                    "),q.YNc(21,Ii,3,3,"span",51),q._uU(22,"\n                    "),q.YNc(23,Pi,3,3,"span",52),q._uU(24,"\n                    "),q.YNc(25,Ni,3,3,"span",51),q._uU(26,"\n                  "),q.qZA(),q._uU(27,"\n                  "),q.YNc(28,Mi,2,1,"div",53),q._uU(29,"\n                "),q.qZA(),q._uU(30,"\n              "),q.qZA(),q._uU(31,"\n            "),q.qZA(),q._uU(32,"\n\n            "),q.TgZ(33,"td",46),q.NdJ("click",(function(){const t=q.CHM(e).$implicit,n=q.oxw(4);return q.KtG(n.edit(t,n.organization.useGroups?n.memberTab.Groups:n.memberTab.Collections))})),q._uU(34,"\n              "),q._UZ(35,"bit-badge-list",54),q._uU(36,"\n            "),q.qZA(),q._uU(37,"\n\n            "),q.TgZ(38,"td",55),q.NdJ("click",(function(){const t=q.CHM(e).$implicit,n=q.oxw(4);return q.KtG(n.edit(t,n.memberTab.Role))})),q._uU(39),q.ALo(40,"userType"),q.qZA(),q._uU(41,"\n\n            "),q.TgZ(42,"td",56),q._uU(43,"\n              "),q.YNc(44,Li,9,6,"ng-container",7),q._uU(45,"\n              "),q.YNc(46,Oi,9,6,"ng-container",7),q._uU(47,"\n            "),q.qZA(),q._uU(48,"\n            "),q.TgZ(49,"td",26),q._uU(50,"\n              "),q._UZ(51,"button",29),q.ALo(52,"i18n"),q._uU(53,"\n\n              "),q.TgZ(54,"bit-menu",null,57),q._uU(56,"\n                "),q.YNc(57,Qi,5,3,"button",33),q._uU(58,"\n                "),q.YNc(59,Ji,8,3,"button",33),q._uU(60,"\n                "),q.YNc(61,Yi,1,0,"bit-menu-divider",7),q._uU(62,"\n                "),q.TgZ(63,"button",31),q.NdJ("click",(function(){const t=q.CHM(e).$implicit,n=q.oxw(4);return q.KtG(n.edit(t,n.memberTab.Role))})),q._uU(64,"\n                  "),q._UZ(65,"i",58),q._uU(66),q.ALo(67,"i18n"),q.qZA(),q._uU(68,"\n                "),q.YNc(69,zi,5,3,"button",33),q._uU(70,"\n                "),q.TgZ(71,"button",31),q.NdJ("click",(function(){const t=q.CHM(e).$implicit,n=q.oxw(4);return q.KtG(n.edit(t,n.memberTab.Collections))})),q._uU(72,"\n                  "),q._UZ(73,"i",59),q._uU(74),q.ALo(75,"i18n"),q.qZA(),q._uU(76,"\n                "),q._UZ(77,"bit-menu-divider"),q._uU(78,"\n                "),q.YNc(79,Ri,5,3,"button",33),q._uU(80,"\n                "),q.YNc(81,Gi,5,3,"button",33),q._uU(82,"\n                "),q.YNc(83,Ei,5,3,"button",33),q._uU(84,"\n                "),q.YNc(85,Bi,5,3,"button",33),q._uU(86,"\n                "),q.TgZ(87,"button",31),q.NdJ("click",(function(){const t=q.CHM(e).$implicit,n=q.oxw(4);return q.KtG(n.remove(t))})),q._uU(88,"\n                  "),q.TgZ(89,"span",36),q._uU(90,"\n                    "),q._UZ(91,"i",37),q._uU(92),q.ALo(93,"i18n"),q.qZA(),q._uU(94,"\n                "),q.qZA(),q._uU(95,"\n              "),q.qZA(),q._uU(96,"\n            "),q.qZA(),q._uU(97,"\n          "),q.qZA()}if(2&e){const e=t.$implicit,n=q.MAs(55),i=q.oxw(4);let o;q.Q6J("ngClass",i.rowHeightClass),q.xp6(4),q.Q6J("ngModel",e.checked),q.xp6(7),q.Q6J("text",q.lcZ(12,28,e))("id",e.userId)("color",e.avatarColor),q.xp6(8),q.hij("\n                      ",null!==(o=e.name)&&void 0!==o?o:e.email,"\n                    "),q.xp6(2),q.Q6J("ngIf",e.status===i.userStatusType.Invited),q.xp6(2),q.Q6J("ngIf",e.status===i.userStatusType.Accepted),q.xp6(2),q.Q6J("ngIf",e.status===i.userStatusType.Revoked),q.xp6(3),q.Q6J("ngIf",e.name),q.xp6(7),q.Q6J("items",i.organization.useGroups?e.groupNames:e.collectionNames)("maxItems",3),q.xp6(4),q.hij("\n              ",q.lcZ(40,30,e.type),"\n            "),q.xp6(5),q.Q6J("ngIf",e.twoFactorEnabled),q.xp6(2),q.Q6J("ngIf",i.showEnrolledStatus(e)),q.xp6(5),q.s9C("appA11yTitle",q.lcZ(52,32,"options")),q.Q6J("bitMenuTriggerFor",n),q.xp6(6),q.Q6J("ngIf",e.status===i.userStatusType.Invited),q.xp6(2),q.Q6J("ngIf",e.status===i.userStatusType.Accepted),q.xp6(2),q.Q6J("ngIf",e.status===i.userStatusType.Accepted||e.status===i.userStatusType.Invited),q.xp6(5),q.hij(" ",q.lcZ(67,34,"memberRole"),"\n                "),q.xp6(3),q.Q6J("ngIf",i.organization.useGroups),q.xp6(5),q.hij(" ",q.lcZ(75,36,"collections"),"\n                "),q.xp6(5),q.Q6J("ngIf",i.organization.useEvents&&e.status===i.userStatusType.Confirmed),q.xp6(2),q.Q6J("ngIf",i.allowResetPassword(e)),q.xp6(2),q.Q6J("ngIf",e.status===i.userStatusType.Revoked),q.xp6(2),q.Q6J("ngIf",e.status!==i.userStatusType.Revoked),q.xp6(7),q.hij(" ",q.lcZ(93,38,"remove"),"\n                  ")}}function Di(e,t){if(1&e&&(q._uU(0,"\n          "),q.YNc(1,ji,98,40,"tr",42),q._uU(2,"\n        ")),2&e){const e=t.$implicit;q.xp6(1),q.Q6J("cdkVirtualForOf",e)}}function $i(e,t){if(1&e){const e=q.EpF();q.ynx(0),q._uU(1,"\n    "),q.YNc(2,Si,4,6,"app-callout",18),q._uU(3,"\n    "),q._uU(4,"\n    "),q.TgZ(5,"cdk-virtual-scroll-viewport",19),q._uU(6,"\n      "),q.TgZ(7,"bit-table",20),q._uU(8,"\n        "),q.ynx(9,21),q._uU(10,"\n          "),q.TgZ(11,"tr"),q._uU(12,"\n            "),q.TgZ(13,"th",22),q._uU(14,"\n              "),q.TgZ(15,"input",23),q.NdJ("change",(function(t){q.CHM(e);const n=q.oxw(2);return q.KtG(n.selectAll(t.target.checked))})),q.qZA(),q._uU(16,"\n              "),q.TgZ(17,"label",24),q._uU(18),q.ALo(19,"i18n"),q.qZA(),q._uU(20,"\n            "),q.qZA(),q._uU(21,"\n            "),q.TgZ(22,"th",25),q._uU(23),q.ALo(24,"i18n"),q.qZA(),q._uU(25,"\n            "),q.TgZ(26,"th",26),q._uU(27),q.ALo(28,"i18n"),q.qZA(),q._uU(29,"\n            "),q.TgZ(30,"th",27),q._uU(31),q.ALo(32,"i18n"),q.qZA(),q._uU(33,"\n            "),q.TgZ(34,"th",26),q._uU(35),q.ALo(36,"i18n"),q.qZA(),q._uU(37,"\n            "),q.TgZ(38,"th",28),q._uU(39,"\n              "),q._UZ(40,"button",29),q.ALo(41,"i18n"),q._uU(42,"\n\n              "),q.TgZ(43,"bit-menu",null,30),q._uU(45,"\n                "),q.YNc(46,Ci,8,3,"ng-container",7),q.ALo(47,"async"),q._uU(48,"\n                "),q.TgZ(49,"button",31),q.NdJ("click",(function(){q.CHM(e);const t=q.oxw(2);return q.KtG(t.bulkReinvite())})),q._uU(50,"\n                  "),q._UZ(51,"i",32),q._uU(52),q.ALo(53,"i18n"),q.qZA(),q._uU(54,"\n                "),q.YNc(55,ki,8,3,"button",33),q._uU(56,"\n                "),q.TgZ(57,"button",31),q.NdJ("click",(function(){q.CHM(e);const t=q.oxw(2);return q.KtG(t.bulkRestore())})),q._uU(58,"\n                  "),q._UZ(59,"i",34),q._uU(60),q.ALo(61,"i18n"),q.qZA(),q._uU(62,"\n                "),q.TgZ(63,"button",31),q.NdJ("click",(function(){q.CHM(e);const t=q.oxw(2);return q.KtG(t.bulkRevoke())})),q._uU(64,"\n                  "),q._UZ(65,"i",35),q._uU(66),q.ALo(67,"i18n"),q.qZA(),q._uU(68,"\n                "),q.TgZ(69,"button",31),q.NdJ("click",(function(){q.CHM(e);const t=q.oxw(2);return q.KtG(t.bulkRemove())})),q._uU(70,"\n                  "),q.TgZ(71,"span",36),q._uU(72,"\n                    "),q._UZ(73,"i",37),q._uU(74),q.ALo(75,"i18n"),q.qZA(),q._uU(76,"\n                "),q.qZA(),q._uU(77,"\n              "),q.qZA(),q._uU(78,"\n            "),q.qZA(),q._uU(79,"\n          "),q.qZA(),q._uU(80,"\n        "),q.BQk(),q._uU(81,"\n        "),q.YNc(82,Di,3,1,"ng-template",38),q._uU(83,"\n      "),q.qZA(),q._uU(84,"\n    "),q.qZA(),q._uU(85,"\n  "),q.BQk()}if(2&e){const e=q.MAs(44),t=q.oxw(2);q.xp6(2),q.Q6J("ngIf",t.showConfirmUsers),q.xp6(3),q.Q6J("itemSize",t.rowHeight),q.xp6(2),q.Q6J("dataSource",t.dataSource),q.xp6(11),q.Oqu(q.lcZ(19,16,"all")),q.xp6(5),q.Oqu(q.lcZ(24,18,"name")),q.xp6(4),q.Oqu(q.lcZ(28,20,t.organization.useGroups?"groups":"collections")),q.xp6(4),q.Oqu(q.lcZ(32,22,"role")),q.xp6(4),q.Oqu(q.lcZ(36,24,"policies")),q.xp6(5),q.s9C("appA11yTitle",q.lcZ(41,26,"options")),q.Q6J("bitMenuTriggerFor",e),q.xp6(6),q.Q6J("ngIf",q.lcZ(47,28,t.canUseSecretsManager$)),q.xp6(6),q.hij("\n                  ",q.lcZ(53,30,"reinviteSelected"),"\n                "),q.xp6(3),q.Q6J("ngIf",t.showBulkConfirmUsers),q.xp6(5),q.hij("\n                  ",q.lcZ(61,32,"restoreAccess"),"\n                "),q.xp6(6),q.hij("\n                  ",q.lcZ(67,34,"revokeAccess"),"\n                "),q.xp6(8),q.hij("\n                    ",q.lcZ(75,36,"remove"),"\n                  ")}}function Fi(e,t){if(1&e&&(q.ynx(0),q._uU(1,"\n  "),q.YNc(2,qi,3,3,"p",7),q._uU(3,"\n  "),q.YNc(4,$i,86,38,"ng-container",7),q._uU(5,"\n"),q.BQk()),2&e){const e=q.oxw();q.xp6(2),q.Q6J("ngIf",!e.dataSource.filteredData.length),q.xp6(2),q.Q6J("ngIf",e.dataSource.filteredData.length)}}function Ki(e,t){}function Hi(e,t){}function Wi(e,t){}function Vi(e,t){}function Xi(e,t){}function eo(e,t){}function to(e,t){}class no extends ct{constructor(e,t,n,i,o,s,r,a,u,c,l,g,m,f,Z,b,v,A,x,w,y){super(e,n,o,s,r,i,c,l,b,w),this.route=t,this.policyService=a,this.policyApiService=u,this.syncService=g,this.organizationService=m,this.organizationApiService=f,this.organizationUserService=Z,this.router=v,this.groupService=A,this.collectionService=x,this.billingApiService=y,this.userType=_.je,this.userStatusType=_.Dn,this.memberTab=ae,this.status=null,this.orgResetPasswordPolicyEnabled=!1,this.orgIsOnSecretsManagerStandalone=!1,this.rowHeight=62,this.rowHeightClass="tw-h-[62px]";const T=this.route.params.pipe((0,Ye.b)((e=>this.organizationService.get$(e.organizationId))),(0,d.d)({refCount:!0,bufferSize:1}));this.canUseSecretsManager$=T.pipe((0,U.U)((e=>e.useSecretsManager)));const q=T.pipe((0,p.w)((e=>e.isProviderUser?(0,ze.D)(this.policyApiService.getPolicies(e.id)).pipe((0,U.U)((e=>je.G.fromListResponse(e)))):this.policyService.policies$)));(0,h.a)([this.route.queryParams,q,T]).pipe((0,Ye.b)((([e,t,n])=>Ui(this,void 0,void 0,(function*(){if(this.organization=n,this.organization.canManageUsersPassword&&!this.organization.hasPublicAndPrivateKeys){const e=yield this.cryptoService.getOrgKey(this.organization.id),t=yield this.cryptoService.makeKeyPair(e),n=new De.u(t[0],t[1].encryptedString),i=yield this.organizationApiService.updateKeys(this.organization.id,n);if(null==i)throw new Error(this.i18nService.t("resetPasswordOrgKeysError"));this.organization.hasPublicAndPrivateKeys=null!=i.publicKey&&null!=i.privateKey,yield this.syncService.fullSync(!0)}const i=t.filter((e=>e.type===_.Mi.ResetPassword)).find((e=>e.organizationId===this.organization.id));if(this.orgResetPasswordPolicyEnabled=null==i?void 0:i.enabled,this.orgIsOnSecretsManagerStandalone=!1,yield this.load(),this.searchControl.setValue(e.search),null!=e.viewEvents){const t=this.dataSource.data.filter((t=>t.id===e.viewEvents));t.length>0&&t[0].status===_.Dn.Confirmed&&this.openEventsDialog(t[0])}})))),(0,Je.sL)()).subscribe()}getUsers(){var e;return Ui(this,void 0,void 0,(function*(){let t,n;const i=this.organizationUserService.getAllUsers(this.organization.id,{includeGroups:this.organization.useGroups,includeCollections:!this.organization.useGroups});this.organization.useGroups?t=this.getGroupNameMap():n=this.getCollectionNameMap();const[o,s,r]=yield Promise.all([i,t,n]);return null===(e=o.data)||void 0===e?void 0:e.map((e=>{var t,n;const i=dt.fromResponse(e);return i.groupNames=i.groups.map((e=>s.get(e))).sort(null===(t=this.i18nService.collator)||void 0===t?void 0:t.compare),i.collectionNames=i.collections.map((e=>r.get(e.id))).sort(null===(n=this.i18nService.collator)||void 0===n?void 0:n.compare),i}))}))}getGroupNameMap(){return Ui(this,void 0,void 0,(function*(){const e=yield this.groupService.getAll(this.organization.id),t=new Map;return e.forEach((e=>t.set(e.id,e.name))),t}))}getCollectionNameMap(){return Ui(this,void 0,void 0,(function*(){const e=new Map,t=(yield this.apiService.getCollections(this.organization.id)).data.map((e=>new Fe.F(new $e.Z(e))));return(yield this.collectionService.decryptMany(t)).forEach((t=>e.set(t.id,t.name))),e}))}deleteUser(e){return this.organizationUserService.deleteOrganizationUser(this.organization.id,e)}revokeUser(e){return this.organizationUserService.revokeOrganizationUser(this.organization.id,e)}restoreUser(e){return this.organizationUserService.restoreOrganizationUser(this.organization.id,e)}reinviteUser(e){return this.organizationUserService.postOrganizationUserReinvite(this.organization.id,e)}confirmUser(e,t){return Ui(this,void 0,void 0,(function*(){const n=yield this.cryptoService.getOrgKey(this.organization.id),i=yield this.cryptoService.rsaEncrypt(n.key,t),o=new Be;o.key=i.encryptedString,yield this.organizationUserService.postOrganizationUserConfirm(this.organization.id,e.id,o)}))}allowResetPassword(e){let t=!1;switch(this.organization.type){case _.je.Owner:t=!0;break;case _.je.Admin:t=e.type!==_.je.Owner;break;case _.je.Custom:t=e.type!==_.je.Owner&&e.type!==_.je.Admin}return this.organization.canManageUsersPassword&&t&&this.organization.useResetPassword&&this.organization.hasPublicAndPrivateKeys&&e.resetPasswordEnrolled&&this.orgResetPasswordPolicyEnabled&&e.status===_.Dn.Confirmed}showEnrolledStatus(e){return this.organization.useResetPassword&&e.resetPasswordEnrolled&&this.orgResetPasswordPolicyEnabled}getManageBillingText(){return this.organization.canEditSubscription?"ManageBilling":"NoManageBilling"}getProductKey(e){let t="";switch(e){case b.kv.Free:t="freeOrg";break;case b.kv.TeamsStarter:t="teamsStarterPlan";break;default:throw new Error(`Unsupported product type: ${e}`)}return`${t}InvLimitReached${this.getManageBillingText()}`}getDialogContent(){return this.i18nService.t(this.getProductKey(this.organization.planProductType),this.organization.seats)}getAcceptButtonText(){if(!this.organization.canEditSubscription)return this.i18nService.t("ok");const e=this.organization.planProductType;if(e!==b.kv.Free&&e!==b.kv.TeamsStarter)throw new Error(`Unsupported product type: ${e}`);return this.i18nService.t("upgrade")}handleDialogClose(e){return Ui(this,void 0,void 0,(function*(){if(!e||!this.organization.canEditSubscription)return;const t=this.organization.planProductType;if(t!==b.kv.Free&&t!==b.kv.TeamsStarter)throw new Error(`Unsupported product type: ${this.organization.planProductType}`);yield this.router.navigate(["/organizations",this.organization.id,"billing","subscription"],{queryParams:{upgrade:!0}})}))}showSeatLimitReachedDialog(){return Ui(this,void 0,void 0,(function*(){const e={title:this.i18nService.t("upgradeOrganization"),content:this.getDialogContent(),type:"primary",acceptButtonText:this.getAcceptButtonText()};this.organization.canEditSubscription||(e.cancelButtonText=null);const t=this.dialogService.openSimpleDialogRef(e);(0,l.z)(t.closed).then(this.handleDialogClose.bind(this))}))}edit(e,t=ae.Role){var n,i;return Ui(this,void 0,void 0,(function*(){if(!e&&this.organization.hasReseller&&this.organization.seats===this.confirmedCount)return void this.platformUtilsService.showToast("error",this.i18nService.t("seatLimitReached"),this.i18nService.t("contactYourProvider"));if(!e&&this.allUsers.length===this.organization.seats&&(this.organization.planProductType===b.kv.Free||this.organization.planProductType===b.kv.TeamsStarter))return void(yield this.showSeatLimitReachedDialog());const o=(s=this.dialogService,r={data:{name:this.userNamePipe.transform(e),organizationId:this.organization.id,organizationUserId:null!=e?e.id:null,allOrganizationUserEmails:null!==(i=null===(n=this.allUsers)||void 0===n?void 0:n.map((e=>e.email)))&&void 0!==i?i:[],usesKeyConnector:null==e?void 0:e.usesKeyConnector,isOnSecretsManagerStandalone:this.orgIsOnSecretsManagerStandalone,initialTab:t,numConfirmedMembers:this.confirmedCount}},s.open(Pe,r));var s,r;switch(yield(0,Re.n)(o.closed)){case ue.Deleted:this.removeUser(e);break;case ue.Saved:case ue.Revoked:case ue.Restored:this.load()}}))}bulkRemove(){return Ui(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const e=un.open(this.dialogService,{data:{organizationId:this.organization.id,users:this.getCheckedUsers()}});yield(0,Re.n)(e.closed),yield this.load()}))}bulkRevoke(){return Ui(this,void 0,void 0,(function*(){yield this.bulkRevokeOrRestore(!0)}))}bulkRestore(){return Ui(this,void 0,void 0,(function*(){yield this.bulkRevokeOrRestore(!1)}))}bulkRevokeOrRestore(e){return Ui(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const t=kn.open(this.dialogService,{organizationId:this.organization.id,users:this.getCheckedUsers(),isRevoking:e});yield(0,l.z)(t.closed),yield this.load()}))}bulkReinvite(){return Ui(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const e=this.getCheckedUsers(),t=e.filter((e=>e.status===_.Dn.Invited));if(t.length<=0)this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("noSelectedUsersApplicable"));else{try{const n=this.organizationUserService.postManyOrganizationUserReinvite(this.organization.id,t.map((e=>e.id))),i=Yn.open(this.dialogService,{data:{users:e,filteredUsers:t,request:n,successfullMessage:this.i18nService.t("bulkReinviteMessage")}});yield(0,Re.n)(i.closed)}catch(n){this.validationService.showError(n)}this.actionPromise=null}}))}bulkConfirm(){return Ui(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const e=Mt.open(this.dialogService,{data:{organizationId:this.organization.id,users:this.getCheckedUsers()}});yield(0,Re.n)(e.closed),yield this.load()}))}bulkEnableSM(){return Ui(this,void 0,void 0,(function*(){const e=this.getCheckedUsers().filter((e=>!e.accessSecretsManager));if(0===e.length)return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("noSelectedUsersApplicable"));const t=zt.open(this.dialogService,{orgId:this.organization.id,users:e});yield(0,Re.n)(t.closed),this.selectAll(!1),yield this.load()}))}openEventsDialog(e){(0,Ke.Z)(this.dialogService,{data:{name:this.userNamePipe.transform(e),organizationId:this.organization.id,entityId:e.id,showUser:!1,entity:"user"}})}resetPassword(e){return Ui(this,void 0,void 0,(function*(){const[t]=yield this.modalService.openViewRef(Xn,this.resetPasswordModalRef,(n=>{n.name=this.userNamePipe.transform(e),n.email=null!=e?e.email:null,n.organizationId=this.organization.id,n.id=null!=e?e.id:null,n.onPasswordReset.subscribe((()=>{t.close(),this.load()}))}))}))}removeUserConfirmationDialog(e){return Ui(this,void 0,void 0,(function*(){const t=e.usesKeyConnector?"removeUserConfirmationKeyConnector":"removeOrgUserConfirmation";return!!(yield this.dialogService.openSimpleDialog({title:{key:"removeUserIdAccess",placeholders:[this.userNamePipe.transform(e)]},content:{key:t},type:"warning"}))&&(!(e.status>_.Dn.Invited&&!1===e.hasMasterPassword)||(yield this.noMasterPasswordConfirmationDialog(e)))}))}revokeUserConfirmationDialog(e){return Ui(this,void 0,void 0,(function*(){return!!(yield this.dialogService.openSimpleDialog({title:{key:"revokeAccess",placeholders:[this.userNamePipe.transform(e)]},content:this.revokeWarningMessage(),acceptButtonText:{key:"revokeAccess"},type:"warning"}))&&(!(e.status>_.Dn.Invited&&!1===e.hasMasterPassword)||(yield this.noMasterPasswordConfirmationDialog(e)))}))}noMasterPasswordConfirmationDialog(e){return Ui(this,void 0,void 0,(function*(){return this.dialogService.openSimpleDialog({title:{key:"removeOrgUserNoMasterPasswordTitle"},content:{key:"removeOrgUserNoMasterPasswordDesc",placeholders:[this.userNamePipe.transform(e)]},type:"warning"})}))}}no.ɵfac=function(e){return new(e||no)(q.Y36(st.s),q.Y36(Oe.gz),q.Y36(S.D),q.Y36(Ee.Z),q.Y36(C.P),q.Y36(Xe.$),q.Y36(rt.R),q.Y36(En.d),q.Y36(ei.P),q.Y36(et.$),q.Y36(Ge.z),q.Y36(ti._),q.Y36(f.Mn),q.Y36(ni.M),q.Y36(k.t),q.Y36(I.x),q.Y36(Oe.F0),q.Y36(x.lT),q.Y36(ii.a),q.Y36(tt.R),q.Y36(oi.l))},no.ɵcmp=q.Xpm({type:no,selectors:[["app-org-people"]],viewQuery:function(e,t){if(1&e&&(q.Gf(mi,7,q.s_b),q.Gf(fi,7,q.s_b),q.Gf(_i,7,q.s_b),q.Gf(Zi,7,q.s_b),q.Gf(bi,7,q.s_b),q.Gf(vi,7,q.s_b)),2&e){let e;q.iGM(e=q.CRH())&&(t.groupsModalRef=e.first),q.iGM(e=q.CRH())&&(t.confirmModalRef=e.first),q.iGM(e=q.CRH())&&(t.resetPasswordModalRef=e.first),q.iGM(e=q.CRH())&&(t.bulkStatusModalRef=e.first),q.iGM(e=q.CRH())&&(t.bulkConfirmModalRef=e.first),q.iGM(e=q.CRH())&&(t.bulkRemoveModalRef=e.first)}},features:[q.qOj],decls:68,vars:33,consts:[[1,"tw-grow",3,"formControl","placeholder"],["type","button","bitButton","","buttonType","primary",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],[1,"tw-mb-4","tw-flex","tw-flex-col","tw-space-y-4"],[3,"selected","selectedChange"],[3,"value"],["bitBadge","","variant","info",4,"ngIf"],[4,"ngIf"],["addEdit",""],["groupsTemplate",""],["confirmTemplate",""],["resetPasswordTemplate",""],["bulkStatusTemplate",""],["bulkConfirmTemplate",""],["bulkRemoveTemplate",""],["bitBadge","","variant","info"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["type","info","icon","bwi bwi-check-circle",3,"title",4,"ngIf"],["scrollWindow","",1,"tw-pb-8",3,"itemSize"],[3,"dataSource"],["header",""],["bitCell","",1,"tw-w-20"],["type","checkbox","bitCheckbox","","id","selectAll",1,"tw-mr-1",3,"change"],["for","selectAll",1,"tw-mb-0","!tw-font-bold","!tw-text-muted"],["bitCell","","bitSortable","email","default",""],["bitCell",""],["bitCell","","bitSortable","type"],["bitCell","",1,"tw-w-10"],["type","button","bitIconButton","bwi-ellipsis-v","size","small",3,"bitMenuTriggerFor","appA11yTitle"],["headerMenu",""],["type","button","bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-envelope"],["type","button","bitMenuItem","",3,"click",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-plus-circle"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-minus-circle"],[1,"tw-text-danger"],["aria-hidden","true",1,"bwi","bwi-close"],["body",""],["type","info","icon","bwi bwi-check-circle",3,"title"],[1,"tw-text-success"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-check"],["bitRow","","alignContent","middle",3,"ngClass",4,"cdkVirtualFor","cdkVirtualForOf"],["bitRow","","alignContent","middle",3,"ngClass"],["bitCell","",3,"click"],["type","checkbox","bitCheckbox","",3,"ngModel","ngModelChange"],["bitCell","",1,"tw-cursor-pointer",3,"click"],[1,"tw-flex","tw-items-center"],["size","small",1,"tw-mr-3",3,"text","id","color"],[1,"tw-flex","tw-flex-col"],["type","button","bitLink",""],["bitBadge","","class","tw-text-xs","variant","secondary",4,"ngIf"],["bitBadge","","class","tw-text-xs","variant","warning",4,"ngIf"],["class","tw-text-sm tw-text-muted",4,"ngIf"],["variant","secondary",3,"items","maxItems"],["bitCell","",1,"tw-cursor-pointer","tw-text-sm","tw-text-muted",3,"click"],["bitCell","",1,"tw-text-muted"],["rowMenu",""],["aria-hidden","true",1,"bwi","bwi-user"],["aria-hidden","true",1,"bwi","bwi-collection"],["bitBadge","","variant","secondary",1,"tw-text-xs"],["bitBadge","","variant","warning",1,"tw-text-xs"],[1,"tw-text-sm","tw-text-muted"],["aria-hidden","true",1,"bwi","bwi-lock",3,"title"],[1,"tw-sr-only"],["aria-hidden","true",1,"bwi","bwi-key",3,"title"],["aria-hidden","true",1,"bwi","bwi-envelope"],["aria-hidden","true",1,"bwi","bwi-check"],["aria-hidden","true",1,"bwi","bwi-users"],["aria-hidden","true",1,"bwi","bwi-file-text"],["aria-hidden","true",1,"bwi","bwi-key"],["aria-hidden","true",1,"bwi","bwi-plus-circle"],["aria-hidden","true",1,"bwi","bwi-minus-circle"]],template:function(e,t){1&e&&(q.TgZ(0,"app-header"),q._uU(1,"\n  "),q._UZ(2,"bit-search",0),q.ALo(3,"i18n"),q._uU(4,"\n\n  "),q.TgZ(5,"button",1),q.NdJ("click",(function(){return t.invite()})),q._uU(6,"\n    "),q._UZ(7,"i",2),q._uU(8),q.ALo(9,"i18n"),q.qZA(),q._uU(10,"\n"),q.qZA(),q._uU(11,"\n\n"),q.TgZ(12,"div",3),q._uU(13,"\n  "),q.TgZ(14,"bit-toggle-group",4),q.NdJ("selectedChange",(function(e){return t.filter(e)})),q.ALo(15,"i18n"),q._uU(16,"\n    "),q.TgZ(17,"bit-toggle",5),q._uU(18),q.ALo(19,"i18n"),q.YNc(20,Ai,2,1,"span",6),q._uU(21,"\n    "),q.qZA(),q._uU(22,"\n\n    "),q.TgZ(23,"bit-toggle",5),q._uU(24),q.ALo(25,"i18n"),q.YNc(26,xi,2,1,"span",6),q._uU(27,"\n    "),q.qZA(),q._uU(28,"\n\n    "),q.TgZ(29,"bit-toggle",5),q._uU(30),q.ALo(31,"i18n"),q.YNc(32,wi,2,1,"span",6),q._uU(33,"\n    "),q.qZA(),q._uU(34,"\n\n    "),q.TgZ(35,"bit-toggle",5),q._uU(36),q.ALo(37,"i18n"),q.YNc(38,yi,2,1,"span",6),q._uU(39,"\n    "),q.qZA(),q._uU(40,"\n  "),q.qZA(),q._uU(41,"\n"),q.qZA(),q._uU(42,"\n"),q.YNc(43,Ti,9,6,"ng-container",7),q._uU(44,"\n"),q.YNc(45,Fi,6,2,"ng-container",7),q._uU(46,"\n"),q.YNc(47,Ki,0,0,"ng-template",null,8,q.W1O),q._uU(49,"\n"),q.YNc(50,Hi,0,0,"ng-template",null,9,q.W1O),q._uU(52,"\n"),q.YNc(53,Wi,0,0,"ng-template",null,10,q.W1O),q._uU(55,"\n"),q.YNc(56,Vi,0,0,"ng-template",null,11,q.W1O),q._uU(58,"\n"),q.YNc(59,Xi,0,0,"ng-template",null,12,q.W1O),q._uU(61,"\n"),q.YNc(62,eo,0,0,"ng-template",null,13,q.W1O),q._uU(64,"\n"),q.YNc(65,to,0,0,"ng-template",null,14,q.W1O),q._uU(67,"\n")),2&e&&(q.xp6(2),q.Q6J("formControl",t.searchControl)("placeholder",q.lcZ(3,19,"searchMembers")),q.xp6(6),q.hij("\n    ",q.lcZ(9,21,"inviteMember"),"\n  "),q.xp6(6),q.Q6J("selected",t.status),q.uIk("aria-label",q.lcZ(15,23,"memberStatusFilter")),q.xp6(3),q.Q6J("value",null),q.xp6(1),q.hij("\n      ",q.lcZ(19,25,"all")," "),q.xp6(2),q.Q6J("ngIf",t.allCount),q.xp6(3),q.Q6J("value",t.userStatusType.Invited),q.xp6(1),q.hij("\n      ",q.lcZ(25,27,"invited"),"\n      "),q.xp6(2),q.Q6J("ngIf",t.invitedCount),q.xp6(3),q.Q6J("value",t.userStatusType.Accepted),q.xp6(1),q.hij("\n      ",q.lcZ(31,29,"needsConfirmation"),"\n      "),q.xp6(2),q.Q6J("ngIf",t.acceptedCount),q.xp6(3),q.Q6J("value",t.userStatusType.Revoked),q.xp6(1),q.hij("\n      ",q.lcZ(37,31,"revoked"),"\n      "),q.xp6(2),q.Q6J("ngIf",t.revokedCount),q.xp6(5),q.Q6J("ngIf",!t.firstLoaded),q.xp6(2),q.Q6J("ngIf",t.firstLoaded))},dependencies:[M.mk,M.O5,u.Wl,u.JJ,u.On,u.oH,L.B,gt.O,ht.A,si.b,Y.l,z.r,R.b,F.Q,K._,ri.M,ai.t,ui.e,ci.n,Ut.a,mt.Y,ft.v,li.T,Ut.f,di.f,pi.n,gi.g,hi.k,i.xd,i.x0,i.N7,i.LO,M.Ov,ie.C,Ge.z,Lt.t],encapsulation:2});const io=[{path:"",component:no,canActivate:[Qe.G],data:{titleId:"members",organizationPermissions:f.tt}}];class oo{}oo.ɵfac=function(e){return new(e||oo)},oo.ɵmod=q.oAB({type:oo}),oo.ɵinj=q.cJS({imports:[Oe.Bz.forChild(io),Oe.Bz]});class so{}so.ɵfac=function(e){return new(e||so)},so.ɵmod=q.oAB({type:so}),so.ɵinj=q.cJS({imports:[r.P,s.f,oo,Le,o.ey,i.Cl]})}}]);
//# sourceMappingURL=416.3bd4c7732de2050fd545.js.map