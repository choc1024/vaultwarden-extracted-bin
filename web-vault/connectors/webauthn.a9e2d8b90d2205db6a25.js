!function(){"use strict";var e={68674:function(e,n,t){t.r(n)}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var a=n[r]={exports:{}};return e[r](a,a.exports,t),a.exports}t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){function e(e){const n=window.location.href;e=e.replace(/[\[\]]/g,"\\$&");const t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(n);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}function n(e,n=!1){return n&&(e=e.replace(/ /g,"+")),decodeURIComponent(Array.prototype.map.call(atob(e),(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""))}function r(e){if(Array.isArray(e)&&(e=Uint8Array.from(e)),e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array){let n="";const t=e.byteLength;for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);e=window.btoa(n)}if("string"!=typeof e)throw new Error("could not coerce to string");return e=e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=*$/g,"")}t(68674);const o="bitwarden://webauthn-callback";let a,i=!1,c=null,d=null,l=null,u=null,s=null,p=!1,f=!1,g=!1,y=null;function b(){if(i)return;if(u=e("parent"),!u)return void w("No parent.");u=decodeURIComponent(u),s=new URL(u).origin;"1"===e("v")?function(){const t=e("data");if(!t)return void w("No data.");a=n(t),c=e("headerText"),d=e("btnText"),l=e("btnReturnText")}():function(){let t=null;try{t=JSON.parse(n(e("data")))}catch(r){return void w("Cannot parse data.")}p=null!=t.callbackUri||!0===t.mobile,a=t.data,c=t.headerText,d=t.btnText,l=t.btnReturnText}(),i=!0}function m(){if(g=!1,"credentials"in navigator)if(b(),a){try{y=function(e){const n=JSON.parse(e),t=n.challenge.replace(/-/g,"+").replace(/_/g,"/");return n.challenge=Uint8Array.from(atob(t),(e=>e.charCodeAt(0))),n.allowCredentials.forEach((e=>{const n=e.id.replace(/\_/g,"/").replace(/\-/g,"+");e.id=Uint8Array.from(atob(n),(e=>e.charCodeAt(0)))})),n}(a)}catch(e){return void w("Cannot parse webauthn data.")}f=!1,p||-1!==navigator.userAgent.indexOf(" Safari/")&&-1===navigator.userAgent.indexOf("Chrome")||h()}else w("No data.");else w("WebAuthn is not supported in this browser.")}function h(){f||navigator.credentials.get({publicKey:y}).then(U).catch(w)}function w(e){p?(document.location.replace(o+"?error="+encodeURIComponent(e)),x(o+"?error="+encodeURIComponent(e))):parent.postMessage("error|"+e,u)}function U(e){if(g)return;const n=function(e){const n=e.response,t=new Uint8Array(n.authenticatorData),o=new Uint8Array(n.clientDataJSON),a=new Uint8Array(e.rawId),i=new Uint8Array(n.signature),c={id:e.id,rawId:r(a),type:e.type,extensions:e.getClientExtensionResults(),response:{authenticatorData:r(t),clientDataJson:r(o),signature:r(i)}};return JSON.stringify(c)}(e);p?(document.location.replace(o+"?data="+encodeURIComponent(n)),x(o+"?data="+encodeURIComponent(n))):(parent.postMessage("success|"+n,u),g=!0)}function x(e){const n=document.getElementById("webauthn-button");n.innerText=decodeURI(l),n.onclick=()=>{document.location.replace(e)}}document.addEventListener("DOMContentLoaded",(()=>{var e;if(m(),window.addEventListener("message",(e=>{e.origin&&""!==e.origin&&e.origin===s&&("stop"===e.data?f=!0:"start"===e.data&&f&&m())}),!1),e="ready",p||parent.postMessage("info|"+e,u),b(),c){document.getElementById("webauthn-header").innerText=decodeURI(c)}if(d){const e=document.getElementById("webauthn-button");e.innerText=decodeURI(d),e.onclick=h}}))}()}();
//# sourceMappingURL=webauthn.a9e2d8b90d2205db6a25.js.map